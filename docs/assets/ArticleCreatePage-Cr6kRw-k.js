import{_ as k,A as b,a as B,C as S,r as c,c as _,d as h,o as T,u as L,w as R,b as M,e as N,f as P,g as D,h as i,i as A,j as n,k as r,N as U,l as E}from"./index-CJk2SBmy.js";import{A as F,a as H,b as j,c as q}from"./ArticleTitleInput-DYgOIsXv.js";const z={key:0,class:"panel-main edit-section"},G=["innerHTML"],J={key:1,class:"panel-main"},K={__name:"ArticleCreatePage",setup(O){const d=new b,w=new B(d),p=new S(d),f=new E(w,p),v=L(),m=D(),s=c(null),l=c(null),t=c({title:"",text:"",preview:"",tagsString:""}),I=_(()=>s.value!==!0),g=_({get(){return t.value.text},set(e){t.value.text=e,t.value.preview=e==null?"":h.parse(e)}}),y=async()=>{console.log("categoryId.value",l.value);const e=await p.get(l.value);s.value=e!=null};T(()=>{l.value=parseInt(v.params.categoryId),s.value=null,y()}),R(()=>v.params.categoryId,async e=>{l.value=parseInt(e),s.value=null,y()});const x=async()=>{const{title:e,text:a,tagsString:u}=t.value,o=Array.from(new Set(u.split(" ").filter(V=>V.length>0)).values());await f.set({categoryId:l.value,title:e,text:a,tags:o}),m.push({name:"ArticlesListPage",params:{categoryId:l.value}})},C=()=>{m.push({name:"ArticlesListPage",params:{categoryId:l.value}})};return(e,a)=>{const u=P("TheMainLayout");return i(),M(u,null,{"panel-main":N(()=>[s.value?(i(),A("section",z,[n("header",null,[r(F,{modelValue:t.value.title,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.title=o)},null,8,["modelValue"])]),n("main",null,[r(H,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=o=>g.value=o)},null,8,["modelValue"]),n("div",{innerHTML:t.value.preview,class:"preview"},null,8,G)]),n("footer",null,[r(j,{modelValue:t.value.tagsString,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.tagsString=o)},null,8,["modelValue"]),r(q,{disabled:I.value,onClick:x},null,8,["disabled"]),n("button",{onClick:C,class:"button-cancel"}," キャンセル ")])])):(i(),A("section",J,[r(U)]))]),_:1})}}},X=k(K,[["__scopeId","data-v-e40d0521"]]);export{X as default};
