import{_ as k,A as I,a as B,C as S,r as c,c as _,d as h,o as T,u as L,w as R,b as M,e as N,f as A,g as n,h as r,N as P,i as D,j as U,k as i,l as E}from"./index-BGUAd7T9.js";import{A as F,a as H,b as j,c as q}from"./ArticleTitleInput-Dg_CtZnJ.js";const z={key:0,class:"panel-main edit-section"},G=["innerHTML"],J={key:1,class:"panel-main"},K={__name:"ArticleCreatePage",setup(O){const d=new I,w=new B(d),p=new S(d),f=new E(w,p),v=L(),m=D(),o=c(null),s=c(null),t=c({title:"",text:"",preview:"",tagsString:""}),x=_(()=>o.value!==!0),g=_({get(){return t.value.text},set(e){t.value.text=e,t.value.preview=e==null?"":h.parse(e)}}),y=async()=>{console.log("categoryId.value",s.value);const e=await p.get(s.value);o.value=e!=null};T(()=>{s.value=parseInt(v.params.categoryId),o.value=null,y()}),R(()=>v.params.categoryId,async e=>{s.value=parseInt(e),o.value=null,y()});const C=async()=>{const{title:e,text:a,tagsString:u}=t.value,l=Array.from(new Set(u.split(" ").filter(b=>b.length>0)).values());await f.set({categoryId:s.value,title:e,text:a,tags:l}),m.push({name:"ArticlesListPage"})},V=()=>{m.push({name:"ArticlesListPage"})};return(e,a)=>{const u=U("TheMainLayout");return i(),M(u,null,{"panel-main":N(()=>[o.value?(i(),A("section",z,[n("header",null,[r(F,{modelValue:t.value.title,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value.title=l)},null,8,["modelValue"])]),n("main",null,[r(H,{modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=l=>g.value=l)},null,8,["modelValue"]),n("div",{innerHTML:t.value.preview,class:"preview"},null,8,G)]),n("footer",null,[r(j,{modelValue:t.value.tagsString,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.tagsString=l)},null,8,["modelValue"]),r(q,{disabled:x.value,onClick:C},null,8,["disabled"]),n("button",{onClick:V,class:"button-cancel"}," キャンセル ")])])):(i(),A("section",J,[r(P)]))]),_:1})}}},X=k(K,[["__scopeId","data-v-e9808a5b"]]);export{X as default};
