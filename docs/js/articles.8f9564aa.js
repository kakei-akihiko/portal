"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[525],{4604:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("TheMainLayout",{attrs:{"no-sidebar":""}},[e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[e("FullHeight",[e("b-form-group",{attrs:{slot:"header","label-sr-only":""},slot:"header"},[e("b-input",{attrs:{name:"title",placeholder:"タイトル"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("b-row",{staticClass:"h-100 pb-3"},[e("b-col",{staticClass:"h-100",attrs:{cols:"6"}},[e("b-textarea",{staticClass:"h-100",attrs:{name:"text",placeholder:"本文","no-resize":""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),e("b-col",{staticClass:"overflow-auto h-100",attrs:{cols:"6"}},[e("div",{domProps:{innerHTML:t._s(t.form.preview)}})])],1),e("b-form-group",{attrs:{slot:"footer","label-sr-only":""},slot:"footer"},[e("div",{staticClass:"d-flex h-interval"},[e("b-input",{attrs:{name:"tags",placeholder:"タグ1 タグ2 ..."},model:{value:t.form.tagsString,callback:function(e){t.$set(t.form,"tagsString",e)},expression:"form.tagsString"}}),e("b-button",{staticClass:"button-save",attrs:{variant:"primary"},on:{click:t.saveButtonClick}},[t._v(" 保存 ")]),e("b-button",{staticClass:"button-cancel",attrs:{variant:"secondary",to:{name:"ArticlesListPage"}}},[t._v(" キャンセル ")])],1)])],1)],1)])},r=[],o=(a(7658),a(7441)),i=a(2925),l=a(5183),n=a(2593),c=a(9935);const u=new l.Z,h=new i.Z(u),d=new c.Z(u),m=new n.Z(h,d);var g={name:"ArticleCreatePage",data(){return{categoryFound:null,categoryId:parseInt(this.$route.params.categoryId),form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":o.TU.parse(this.form.text)}}},watch:{$route(t){this.categoryId=parseInt(t.params.categoryId),this.categoryFound=null,this.confirmCategoryExistence()}},mounted(){this.confirmCategoryExistence()},methods:{async confirmCategoryExistence(){const t=await d.get(this.categoryId);this.categoryFound=null!=t,!1===this.categoryFound&&this.showCatgoryNotFoundToast()},async saveButtonClick(){const{categoryId:t}=this,{title:e,text:a,tagsString:s}=this.form;if(null==this.categoryFound&&await this.confirmCategoryExistence(),!0!==this.categoryFound)return void this.showCatgoryNotFoundToast();const r=Array.from(new Set(s.split(" ").filter((t=>t.length>0))).values());await m.set({categoryId:t,title:e,text:a,tags:r}),this.$router.push({name:"ArticlesListPage"})},showCatgoryNotFoundToast(){this.$bvToast.toast("カテゴリが見つかりません。",{autoHideDelay:5e3,appendToast:!0})}}},f=g,p=a(1001),b=(0,p.Z)(f,s,r,!1,null,"273c403f",null),v=b.exports},4985:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("TheMainLayout",{attrs:{"no-sidebar":""}},[e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[t.loading?e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):null==t.article?e("NotFoundAlert"):e("FullHeight",[e("b-form-group",{attrs:{slot:"header","label-sr-only":""},slot:"header"},[e("b-input",{attrs:{name:"title",placeholder:"タイトル"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("b-row",{staticClass:"h-100 pb-3"},[e("b-col",{staticClass:"h-100",attrs:{cols:"6"}},[e("b-textarea",{staticClass:"h-100",attrs:{name:"text",placeholder:"本文","no-resize":""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),e("b-col",{staticClass:"overflow-auto h-100",attrs:{cols:"6"}},[e("div",{domProps:{innerHTML:t._s(t.form.preview)}})])],1),e("b-form-group",{attrs:{slot:"footer","label-sr-only":""},slot:"footer"},[e("div",{staticClass:"d-flex h-interval"},[e("b-input",{attrs:{name:"tags",placeholder:"タグ1 タグ2 ..."},model:{value:t.form.tagsString,callback:function(e){t.$set(t.form,"tagsString",e)},expression:"form.tagsString"}}),e("b-button",{staticClass:"button-save",attrs:{variant:"primary"},on:{click:t.saveButtonClick}},[t._v(" 保存 ")]),e("b-button",{staticClass:"button-cancel",attrs:{variant:"secondary",to:{name:"ArticlesListPage"}}},[t._v(" キャンセル ")])],1)])],1)],1)])},r=[],o=(a(7658),a(7441)),i=a(2925),l=a(5183),n=a(2593),c=a(9935);const u=new l.Z,h=new i.Z(u),d=new c.Z(u),m=new n.Z(h,d);var g={name:"ArticleEditPage",data(){const t=parseInt(this.$route.params.id);return{article:null,articleId:t,loading:!0,form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":o.TU.parse(this.form.text)}}},watch:{$route(t){this.articleId=parseInt(t.params.id),this.loadArticle()}},mounted(){this.articleId=parseInt(this.$route.params.id),this.loadArticle()},methods:{async loadArticle(){this.loading=!0,this.article=null;const{articleId:t}=this,e=await m.get({articleId:t});e.length>0&&(this.article=e[0],this.form.title=this.article.title,this.text=this.article.text,this.form.tagsString=this.article.tags?.join(" ")??""),this.loading=!1},async saveButtonClick(){const{id:t,categoryId:e}=this.article,{title:a,text:s,tagsString:r}=this.form,o=Array.from(new Set(r.split(" ").filter((t=>t.length>0))).values());await m.set({id:t,categoryId:e,title:a,text:s,tags:o}),this.$router.push({name:"ArticlesListPage"})}}},f=g,p=a(1001),b=(0,p.Z)(f,s,r,!1,null,"9da1fa1e",null),v=b.exports}}]);
//# sourceMappingURL=articles.8f9564aa.js.map