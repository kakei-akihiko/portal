"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[525],{8632:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var i=a(1033);const r={class:"h-100"},s={class:"form-group"},n={class:"row h-100 pb-3"},l={cols:"6",class:"col-6 h-100"},o={cols:"6",class:"col-6 overflow-auto h-100"},c=["innerHTML"],d={class:"form-group"},u={class:"d-flex h-interval"};function h(t,e,a,h,m,p){const g=(0,i.up)("FullHeight"),f=(0,i.up)("TheMainLayout");return(0,i.wg)(),(0,i.j4)(f,{"no-sidebar":""},{"panel-main":(0,i.w5)((()=>[(0,i._)("div",r,[(0,i.Wm)(g,null,{header:(0,i.w5)((()=>[(0,i._)("fieldset",s,[(0,i.wy)((0,i._)("input",{class:"form-control",type:"text",name:"title",placeholder:"タイトル","onUpdate:modelValue":e[0]||(e[0]=t=>m.form.title=t)},null,512),[[i.nr,m.form.title]])])])),footer:(0,i.w5)((()=>[(0,i._)("fieldset",d,[(0,i._)("div",u,[(0,i.wy)((0,i._)("input",{name:"tags",class:"form-control",placeholder:"タグ1 タグ2 ...","onUpdate:modelValue":e[2]||(e[2]=t=>m.form.tagsString=t)},null,512),[[i.nr,m.form.tagsString]]),(0,i._)("button",{class:"btn btn-primary button-save",onClick:e[3]||(e[3]=(...t)=>p.saveButtonClick&&p.saveButtonClick(...t))}," 保存 "),(0,i._)("button",{class:"btn btn-secondary button-cancel",onClick:e[4]||(e[4]=(...t)=>p.cancelButtonClick&&p.cancelButtonClick(...t))}," キャンセル ")])])])),default:(0,i.w5)((()=>[(0,i._)("div",n,[(0,i._)("div",l,[(0,i.wy)((0,i._)("textarea",{name:"text",placeholder:"本文",class:"form-control h-100 text-body","onUpdate:modelValue":e[1]||(e[1]=t=>p.text=t),wrap:"soft",rows:"2"},null,512),[[i.nr,p.text]])]),(0,i._)("div",o,[(0,i._)("div",{innerHTML:m.form.preview},null,8,c)])])]),void 0,!0),_:1})])])),_:1})}a(825);var m=a(9866),p=a(7370),g=a(5191),f=a(4793),w=a(4559);const v=new g.Z,y=new p.Z(v),_=new w.Z(v),x=new f.Z(y,_);var b={name:"ArticleCreatePage",data(){return{categoryFound:null,categoryId:parseInt(this.$route.params.categoryId),form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":m.T.parse(this.form.text)}}},watch:{$route(t){this.categoryId=parseInt(t.params.categoryId),this.categoryFound=null,this.confirmCategoryExistence()}},mounted(){this.confirmCategoryExistence()},methods:{cancelButtonClick(){this.$router.push({name:"ArticlesListPage"})},async confirmCategoryExistence(){const t=await _.get(this.categoryId);this.categoryFound=null!=t,!1===this.categoryFound&&this.showCatgoryNotFoundToast()},async saveButtonClick(){const{categoryId:t}=this,{title:e,text:a,tagsString:i}=this.form;if(null==this.categoryFound&&await this.confirmCategoryExistence(),!0!==this.categoryFound)return void this.showCatgoryNotFoundToast();const r=Array.from(new Set(i.split(" ").filter((t=>t.length>0))).values());await x.set({categoryId:t,title:e,text:a,tags:r}),this.$router.push({name:"ArticlesListPage"})},showCatgoryNotFoundToast(){this.$bvToast.toast("カテゴリが見つかりません。",{autoHideDelay:5e3,appendToast:!0})}}},k=a(3615);const C=(0,k.Z)(b,[["render",h],["__scopeId","data-v-6f9e0846"]]);var I=C},8734:function(t,e,a){a.r(e),a.d(e,{default:function(){return T}});var i=a(1033);const r=t=>((0,i.dD)("data-v-189961b1"),t=t(),(0,i.Cn)(),t),s={class:"h-100"},n={key:0,class:"spinner-border text-primary",role:"status"},l=r((()=>(0,i._)("span",{class:"sr-only"},"Loading...",-1))),o=[l],c={class:"form-group"},d={class:"row h-100 pb-3"},u={cols:"6",class:"col-6 h-100"},h={cols:"6",class:"col-6 overflow-auto h-100"},m=["innerHTML"],p={class:"form-group"},g={class:"d-flex h-interval"};function f(t,e,a,r,l,f){const w=(0,i.up)("NotFoundAlert"),v=(0,i.up)("FullHeight"),y=(0,i.up)("TheMainLayout");return(0,i.wg)(),(0,i.j4)(y,{"no-sidebar":""},{"panel-main":(0,i.w5)((()=>[(0,i._)("div",s,[l.loading?((0,i.wg)(),(0,i.iD)("div",n,o)):null==l.article?((0,i.wg)(),(0,i.j4)(w,{key:1})):((0,i.wg)(),(0,i.j4)(v,{key:2},{header:(0,i.w5)((()=>[(0,i._)("fieldset",c,[(0,i.wy)((0,i._)("input",{class:"form-control",type:"text",name:"title",placeholder:"タイトル","onUpdate:modelValue":e[0]||(e[0]=t=>l.form.title=t)},null,512),[[i.nr,l.form.title]])])])),footer:(0,i.w5)((()=>[(0,i._)("fieldset",p,[(0,i._)("div",g,[(0,i.wy)((0,i._)("input",{name:"tags",class:"form-control",placeholder:"タグ1 タグ2 ...","onUpdate:modelValue":e[2]||(e[2]=t=>l.form.tagsString=t)},null,512),[[i.nr,l.form.tagsString]]),(0,i._)("button",{class:"btn btn-primary button-save",onClick:e[3]||(e[3]=(...t)=>f.saveButtonClick&&f.saveButtonClick(...t))}," 保存 "),(0,i._)("button",{class:"btn btn-secondary button-cancel",onClick:e[4]||(e[4]=(...t)=>f.cancelButtonClick&&f.cancelButtonClick(...t))}," キャンセル ")])])])),default:(0,i.w5)((()=>[(0,i._)("div",d,[(0,i._)("div",u,[(0,i.wy)((0,i._)("textarea",{name:"text",placeholder:"本文",class:"form-control h-100 text-body","onUpdate:modelValue":e[1]||(e[1]=t=>f.text=t),wrap:"soft",rows:"2"},null,512),[[i.nr,f.text]])]),(0,i._)("div",h,[(0,i._)("div",{innerHTML:l.form.preview,class:"article-body-view"},null,8,m)])])]),void 0,!0),_:1}))])])),_:1})}a(825);var w=a(9866),v=a(7370),y=a(5191),_=a(4793),x=a(4559);const b=new y.Z,k=new v.Z(b),C=new x.Z(b),I=new _.Z(k,C);var A={name:"ArticleEditPage",data(){const t=parseInt(this.$route.params.id);return{article:null,articleId:t,loading:!0,form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":w.T.parse(this.form.text)}}},watch:{$route(t){this.articleId=parseInt(t.params.id),this.loadArticle()}},mounted(){this.articleId=parseInt(this.$route.params.id),this.loadArticle()},methods:{cancelButtonClick(){this.$router.push({name:"ArticlesListPage"})},async loadArticle(){this.loading=!0,this.article=null;const{articleId:t}=this,e=await I.get({articleId:t});e.length>0&&(this.article=e[0],this.form.title=this.article.title,this.text=this.article.text,this.form.tagsString=this.article.tags?.join(" ")??""),this.loading=!1},async saveButtonClick(){const{id:t,categoryId:e}=this.article,{title:a,text:i,tagsString:r}=this.form,s=Array.from(new Set(r.split(" ").filter((t=>t.length>0))).values());await I.set({id:t,categoryId:e,title:a,text:i,tags:s}),this.$router.push({name:"ArticleReadPage",parems:{id:t}})}}},B=a(3615);const L=(0,B.Z)(A,[["render",f],["__scopeId","data-v-189961b1"]]);var T=L},7004:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});var i=a(1033);const r=t=>((0,i.dD)("data-v-5265a8e2"),t=t(),(0,i.Cn)(),t),s={class:"h-100"},n={key:0,class:"spinner-border text-primary",role:"status"},l=r((()=>(0,i._)("span",{class:"sr-only"},"Loading...",-1))),o=[l],c={key:2,class:"h-100 main"},d={class:"title-div"},u=r((()=>(0,i._)("i",{class:"fas fa-edit"},null,-1))),h=[u],m=r((()=>(0,i._)("i",{class:"fas fa-times"},null,-1))),p=[m],g=["innerHTML"],f={class:"h-interval"};function w(t,e,a,r,l,u){const m=(0,i.up)("TheSidebar"),w=(0,i.up)("NotFoundAlert"),v=(0,i.up)("TheMainLayout");return(0,i.wg)(),(0,i.j4)(v,null,{sidebar:(0,i.w5)((()=>[(0,i.Wm)(m)])),"panel-main":(0,i.w5)((()=>[(0,i._)("div",s,[l.loading?((0,i.wg)(),(0,i.iD)("div",n,o)):null==l.article?((0,i.wg)(),(0,i.j4)(w,{key:1})):((0,i.wg)(),(0,i.iD)("section",c,[(0,i._)("div",d,[(0,i._)("h2",null,(0,i.zw)(l.form.title),1),(0,i._)("div",null,[(0,i._)("button",{class:"btn btn-link",onClick:e[0]||(e[0]=(...t)=>u.articleEditButtonClick&&u.articleEditButtonClick(...t))},h),(0,i._)("button",{class:"btn btn-link button-cancel",onClick:e[1]||(e[1]=(...t)=>u.articleListButtonClick&&u.articleListButtonClick(...t))},p)])]),(0,i._)("div",{innerHTML:l.form.preview,class:"preview article-body-view"},null,8,g),(0,i._)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.form.tags,(t=>((0,i.wg)(),(0,i.iD)("span",{class:"badge badge-info",key:t},(0,i.zw)(t),1)))),128))])]))])])),_:1})}a(825);var v=a(9866),y=a(7370),_=a(5191),x=a(4793),b=a(4559);const k=new _.Z,C=new y.Z(k),I=new b.Z(k),A=new x.Z(C,I);var B={name:"ArticleReadPage",data(){const t=parseInt(this.$route.params.id);return{article:null,articleId:t,loading:!0,form:{title:"",text:"",preview:"",tags:[]}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":v.T.parse(this.form.text)}}},watch:{$route(t){this.articleId=parseInt(t.params.id),this.loadArticle()}},mounted(){this.articleId=parseInt(this.$route.params.id),this.loadArticle()},methods:{articleEditButtonClick(){const{articleId:t}=this;this.$router.push({name:"ArticleEditPage",params:{id:t}})},articleListButtonClick(){this.$router.push({name:"ArticlesListPage"})},async loadArticle(){this.loading=!0,this.article=null;const{articleId:t}=this,e=await A.get({articleId:t});e.length>0&&(this.article=e[0],this.form.title=this.article.title,this.text=this.article.text,this.form.tags=this.article.tags),this.loading=!1}}},L=a(3615);const T=(0,L.Z)(B,[["render",w],["__scopeId","data-v-5265a8e2"]]);var Z=T}}]);
//# sourceMappingURL=articles.863bb984.js.map