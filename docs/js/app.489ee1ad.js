(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);g&&g(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},r={app:0},s={app:0},n=[];function o(t){return l.p+"js/"+({articles:"articles",categories:"categories",settings:"settings"}[t]||t)+"."+{articles:"59891eeb",categories:"4177a8b6",settings:"69304936"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={articles:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var i="css/"+({articles:"articles",categories:"categories",settings:"settings"}[t]||t)+"."+{articles:"0100e724",categories:"31d6cfe0",settings:"31d6cfe0"}[t]+".css",s=l.p+i,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var c=n[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===s))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],d=c.getAttribute("data-href");if(d===i||d===s)return e()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=e,g.onerror=function(e){var i=e&&e.target&&e.target.src||s,n=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete r[t],g.parentNode.removeChild(g),a(n)},g.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(g)})).then((function(){r[t]=0})));var i=s[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,a){i=s[t]=[e,a]}));e.push(i[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(g);var a=s[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,a[1](u)}s[t]=void 0}};var g=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var g=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},2409:function(t,e,a){},"26b9":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));class i{constructor(t){this.database=t.instance}async get(t){return await this.database.categories.get(t)}async getAll(){return this.database.categories.toArray()}async put({categoryId:t,title:e,icon:a,articlesViewMode:i,tagPosition:r,tagSelectionMode:s}){try{const n=await this.database.categories.put({id:t,title:e,icon:a,articlesViewMode:i,tagPosition:r,tagSelectionMode:s});return console.log("Inserted. categoryId:",n),n}catch(n){console.error(n.stack||n)}}}},"29e7":function(t,e,a){},"2bcf":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("d9e2");class i{constructor(t,e){this.articleRepository=t,this.categoryRepository=e}async get({categoryId:t,articleId:e}){try{const a=await this.articleRepository.getArticles({categoryId:t,articleId:e}),i=a.map(t=>t.id),r=await this.articleRepository.getArticleTags(i);return a.map(t=>this.getResult(t,r))}catch(a){console.error("Ë®ò‰∫ãË™≠„ÅøËæº„ÇÅ„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",a)}}async set({id:t,categoryId:e,expanded:a,title:i,text:r,tags:s}){const n=await this.categoryRepository.get(e);if(null==n)throw console.error("Specified categoryId not found. categoryId:",e),new Error("Specified categoryId not found. categoryId: "+e);try{const n=await this.articleRepository.setArticle({id:t,categoryId:e,expanded:a,title:i,text:r});console.log("Inserted. articleId:",n);const o=await this.articleRepository.getArticleTags([n]);if(!this.areEqualTagsToArticleTags(s,o)){const t=o.map(t=>t.id);await this.articleRepository.deleteTagsFromArticle(t),await this.articleRepository.addTagsToArticle(n,s)}return n}catch(o){console.error("Ë®ò‰∫ã„Çí‰øùÂ≠ò„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",o.stack||o)}}async setExpanding(t,e){try{const a=await this.articleRepository.getArticles({articleId:t});if(a.length<=0)throw new Error("Specified articleId not found. articleId: "+t);a[0].expanded=e,this.articleRepository.setArticle(a[0])}catch(a){console.error("Ë®ò‰∫ã„Çí‰øùÂ≠ò„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",a.stack||a)}}getResult(t,e){const a=e.filter(e=>e.articleId===t.id).map(t=>t.tagText),i=Array.from(new Set(a).values());return{...t,tags:i}}areEqualTagsToArticleTags(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a].tagText)return!1;return!0}}},"313e":function(t,e,a){"use strict";a("2409")},"3d9f":function(t,e,a){"use strict";a("29e7")},"4c77":function(t,e,a){},5153:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},s=[],n=(a("baad"),a("2877")),o={},l=Object(n["a"])(o,r,s,!1,null,null,null),c=l.exports,d=a("8c4f"),u=function(){var t=this,e=t._self._c;return e("TheMainLayout",{attrs:{"main-panel-scroll":""}},[e("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"},[e("NavCategories",{staticClass:"mt-3"}),e("FormGroupTagButtons",{staticClass:"mt-3"})],1),e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[null!=t.selectedCategory?e("ArticleListPageMainPanel",{attrs:{category:t.selectedCategory}}):t._e()],1)],1)},g=[],p=a("2f62"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-100"},[e("div",{staticClass:"d-flex"},[e("h2",[t._v(t._s(t.category.title))]),e("div",{staticClass:"ml-auto"},[e("b-form-group",[e("ButtonCategorySettingPage",{attrs:{"category-id":t.category.id}}),e("ButtonArticleCreatePage",{attrs:{"category-id":t.category.id}})],1)],1)]),e("div",{staticClass:"command-bar d-flex justify-content-end"},[e("NavArticleViewMode",{attrs:{mode:t.mode},on:{change:t.navViewModeChange}})],1),e("div",{staticClass:"alerts pt-3"},[e("b-alert",{attrs:{show:t.alertCompactOnlyVisible,variant:"warning"}},[t._v(" Ë©≥Á¥∞„É¢„Éº„Éâ„ÅßÂèØËÉΩ„Å™Ë®ò‰∫ã„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Ç≥„É≥„Éë„ÇØ„Éà„É¢„Éº„Éâ„Åß„ÅÇ„Çå„Å∞Ë°®Á§∫„Åß„Åç„Åæ„Åô„ÄÇ ")]),e("b-alert",{attrs:{show:t.alertDetailOnlyVisible,variant:"warning"}},[t._v(" „Ç≥„É≥„Éë„ÇØ„Éà„É¢„Éº„Éâ„ÅßÂèØËÉΩ„Å™Ë®ò‰∫ã„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇË©≥Á¥∞„É¢„Éº„Éâ„Åß„ÅÇ„Çå„Å∞Ë°®Á§∫„Åß„Åç„Åæ„Åô„ÄÇ ")]),e("b-alert",{attrs:{show:t.alertNoArticle,variant:"warning"}},[t._v(" Ê§úÁ¥¢Êù°‰ª∂„Å´ÂêàËá¥„Åô„ÇãË®ò‰∫ã„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ ")])],1),t.modeDetailActive?e("div",{staticClass:"pt-3"},t._l(t.articles,(function(a){return e("ArticlePanel",{key:a.id,attrs:{article:a,tagPosition:t.category.tagPosition},on:{expand:function(e){return t.articleExpand(a,e)}}})})),1):t._e(),t.modeCompactActive?e("CampactLinksPanel",{staticClass:"pt-3",attrs:{table:t.table}}):t._e()],1)},h=[],f=function(){var t=this,e=t._self._c;return e("b-card",{attrs:{"body-class":"py-2"}},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"mr-auto d-flex flex-column"},[e("div",{staticClass:"title"},[null==t.article.url?e("span",[t._v(t._s(t.article.title))]):e("a",{attrs:{href:t.article.url,target:"_blank"}},[t._v(t._s(t.article.title))])]),t.bottomTagsVisible?e("div",{staticClass:"tags"},[null!=t.article.tags?e("div",{staticClass:"tags pr-2 h-interval"},t._l(t.article.tags,(function(a){return e("b-badge",{key:a,attrs:{variant:"info"}},[t._v(" "+t._s(a)+" ")])})),1):t._e()]):t._e()]),e("div",{staticClass:"right-side"},[t.bottomTagsVisible||null==t.article.tags?t._e():e("div",{staticClass:"pr-2 d-inline-block h-interval"},t._l(t.article.tags,(function(a){return e("b-badge",{key:a,attrs:{variant:"info"}},[t._v(" "+t._s(a)+" ")])})),1),t.expanded&&t.expandButtonVisible?e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.expandButtonClick}},[e("i",{staticClass:"fas fa-arrow-circle-down"})]):t._e(),!t.expanded&&t.expandButtonVisible?e("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.expandButtonClick}},[e("i",{staticClass:"fas fa-arrow-circle-up"})]):t._e(),e("b-button",{attrs:{variant:"link",to:{name:"ArticleEditPage",params:{id:t.article.id}}}},[e("i",{staticClass:"fas fa-edit"})])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],domProps:{innerHTML:t._s(t.bodyHtml)}})])},y=[],v=a("0e54"),b=a.n(v),C={name:"ArticlePanel",props:{article:{type:Object,required:!0},tagPosition:{default:"right",type:String}},computed:{bodyHtml(){return b()(this.article.text)},expandButtonVisible(){return null!=this.article.text&&this.article.text.length>0},expanded(){return!0===this.article.expanded},bottomTagsVisible(){return"bottom"===this.tagPosition}},methods:{expandButtonClick(){this.$emit("expand",!this.expanded)}}},x=C,w=Object(n["a"])(x,f,y,!1,null,null,null),_=w.exports,A=function(){var t=this,e=t._self._c;return e("b-button",{attrs:{variant:"link",to:{name:"ArticleCreatePage",params:{categoryId:t.categoryId}}}},[e("i",{staticClass:"fas fa-plus"})])},T=[],I={name:"ButtonArticleCreatePage",props:{categoryId:Number}},S=I,P=Object(n["a"])(S,A,T,!1,null,null,null),k=P.exports,M=function(){var t=this,e=t._self._c;return e("b-button",{attrs:{variant:"link",to:{name:"CategorySettingPage",params:{categoryId:t.categoryId}}}},[e("i",{staticClass:"fas fa-cog"})])},O=[],j={name:"ButtonCategorySettingPage",props:{categoryId:Number}},V=j,E=Object(n["a"])(V,M,O,!1,null,null,null),B=E.exports,N=function(){var t=this,e=t._self._c;return e("div",t._l(t.table,(function(a){return e("div",{key:a.text,staticClass:"h-interval"},[e("h3",[t._v(t._s(a.text))]),t._l(a.articles,(function(a){return e("a",{key:a.id,attrs:{href:a.url,target:"_blank"}},[t._v(" "+t._s(a.title)+" ")])}))],2)})),0)},R=[],L={name:"CampactLinksPanel",props:{table:Array}},$=L,D=Object(n["a"])($,N,R,!1,null,null,null),F=D.exports,q=function(){var t=this,e=t._self._c;return e("b-nav",{attrs:{pills:"",small:""}},[e("b-nav-item",{attrs:{active:t.modeCompactActive},on:{click:t.modeCompactNavClick}},[t._v(" „Ç≥„É≥„Éë„ÇØ„Éà ")]),e("b-nav-item",{attrs:{active:t.modeDetailActive},on:{click:t.modeDetailNavClick}},[t._v(" Ë©≥Á¥∞ ")])],1)},H=[],G={name:"NavArticleViewMode",props:{mode:String},computed:{modeCompactActive(){return"compact"===this.mode},modeDetailActive(){return"detail"===this.mode}},methods:{modeCompactNavClick(){this.$emit("change","compact")},modeDetailNavClick(){this.$emit("change","detail")}}},J=G,U=Object(n["a"])(J,q,H,!1,null,null,null),z=U.exports;a("13d5"),a("14d9");class K{create(t,e){const a=this.getArticles(t,e),i=this.getTags(a);return this.getTable(a,i)}getArticles(t,e){return t.filter(t=>null!=t.url).filter(t=>this.isTargetArticle(t,e))}isTargetArticle(t,e){return null==e||e.length<=0||null!=t.tags&&e.every(e=>t.tags.includes(e))}getTags(t){const e=t.some(t=>null==t.tags||t.tags.length<=0),a=e?[{text:"Ôºà„Çø„Ç∞„Å™„ÅóÔºâ",value:null}]:[],i=t.map(t=>t.tags).reduce((t,e)=>(e.forEach(e=>{!1===t.includes(e)&&t.push(e)}),t),[]).map(t=>({text:t,value:t}));return[...a,...i]}getTable(t,e){return e.map(e=>{const a=t.filter(t=>null==e.value?null==t.tags||t.tags.length<=0:null!=t.tags&&t.tags.includes(e.value));return{...e,articles:a}})}}const Q=new K;var W={name:"ArticleListPageMainPanel",components:{ArticlePanel:_,ButtonArticleCreatePage:k,ButtonCategorySettingPage:B,CampactLinksPanel:F,NavArticleViewMode:z},props:{category:{type:Object,required:!0}},computed:{alertCompactOnlyVisible(){return this.modeDetailActive&&this.articles.length<=0&&this.table.length>0},alertDetailOnlyVisible(){return this.modeCompactActive&&this.articles.length>0&&this.table.length<=0},alertNoArticle(){return this.articles.length<=0&&this.table.length<=0},articles(){const{articles:t,selectedTagTexts:e}=this.$store.state;return t.filter(t=>Q.isTargetArticle(t,e))},mode(){return"detail"===this.category.articlesViewMode?"detail":"compact"},modeCompactActive(){return"compact"===this.mode},modeDetailActive(){return"detail"===this.mode},table(){const{articles:t,selectedTagTexts:e}=this.$store.state;return Q.create(t,e)}},methods:{articleExpand(t,e){const{id:a}=t;this.$store.dispatch("setArticleExpanded",{id:a,expanded:e})},navViewModeChange(t){const e=this.category.id;this.$store.dispatch("setArticlesViewModeToCategory",{categoryId:e,articlesViewMode:t})}}},X=W,Y=Object(n["a"])(X,m,h,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t._self._c;return e("b-nav",{staticClass:"nav-category",attrs:{vertical:""}},t._l(t.categories,(function(a){return e("b-nav-item",{key:a.id,attrs:{active:a.active},on:{click:function(e){return t.categorySelect(a)}}},[t._v(" "+t._s(a.title)+" ")])})),1)},et=[],at={name:"NavCategories",computed:{categories(){return this.$store.state.categories.map(t=>{const{id:e,title:a}=t,i=e===this.$store.state.categoryId;return{active:i,id:e,title:a}})}},methods:{async categorySelect(t){null!=t&&(this.$store.commit("setCategoryId",t.id),await this.$store.dispatch("loadArticles",t.id))}}},it=at,rt=Object(n["a"])(it,tt,et,!1,null,null,null),st=rt.exports,nt=function(){var t=this,e=t._self._c;return e("b-form-group",t._l(t.tagButtons,(function(a){return e("b-button",{key:a.text,attrs:{variant:a.variant,size:"sm"},on:{click:function(e){return t.tagButtonClick(a)}}},[t._v(" "+t._s(a.text)+" ")])})),1)},ot=[],lt={name:"FormGroupTagButtons",computed:{tagButtons(){return this.allTags.map(t=>{const{selected:e,text:a}=t,i=e?"info":"outline-info";return{selected:e,text:a,variant:i}})},...Object(p["b"])(["allTags"])},methods:{tagButtonClick(t){const{text:e,selected:a}=t;this.$store.commit("selectTagText",{text:e,selected:!a})}}},ct=lt,dt=Object(n["a"])(ct,nt,ot,!1,null,null,null),ut=dt.exports,gt={name:"ArticlesListPage",components:{ArticleListPageMainPanel:Z,FormGroupTagButtons:ut,NavCategories:st},computed:{...Object(p["c"])(["categories","categoryId"]),selectedCategory(){return this.categories.filter(t=>t.id===this.categoryId)[0]}},async mounted(){this.$store.dispatch("loadCategories")}},pt=gt,mt=(a("cb3b"),Object(n["a"])(pt,u,g,!1,null,null,null)),ht=mt.exports;i["default"].use(d["a"]);const ft=[{path:"/",name:"ArticlesListPage",component:ht},{path:"/categories/:categoryId/articles/create",name:"ArticleCreatePage",component:()=>a.e("articles").then(a.bind(null,"fbf5"))},{path:"/articles/:id/edit",name:"ArticleEditPage",component:()=>a.e("articles").then(a.bind(null,"1b09"))},{path:"/categories",name:"CategoryPage",component:()=>a.e("categories").then(a.bind(null,"622d"))},{path:"/categories/:id/import",name:"CategoryImportPage",component:()=>a.e("categories").then(a.bind(null,"4875"))},{path:"/categories/:categoryId/setting",name:"CategorySettingPage",component:()=>a.e("categories").then(a.bind(null,"8be7"))},{path:"/settings",name:"SettingPage",component:()=>a.e("settings").then(a.bind(null,"e80b"))}],yt=new d["a"]({routes:ft});var vt=yt;class bt{fromArticles(t){return t.map(t=>{const e=null==t.text?null:t.text.match("^https?://[^ \r\n\t]+"),a=null==e?null:e[0];return{expanded:!1,url:a,...t}})}}var Ct=a("6bfa"),xt=a("ff8a"),wt=a("2bcf"),_t=a("26b9");a("d9e2");class At{constructor(t){this.categoryRepository=t}async setSettings(t,{articlesViewMode:e,tagPosition:a,tagSelectionMode:i}){const r=await this.categoryRepository.get(t);if(null==r)throw console.error("Specified categoryId not found. categoryId:",t),new Error("Specified categoryId not found. categoryId: "+t);const s={...r,categoryId:t,articlesViewMode:null!==e&&void 0!==e?e:r.articlesViewMode,tagPosition:null!==a&&void 0!==a?a:r.tagPosition,tagSelectionMode:null!==i&&void 0!==i?i:r.tagSelectionMode};try{await this.categoryRepository.put(s),console.log("‰øùÂ≠ò„Åó„Åæ„Åó„Åü(service):",s)}catch(n){console.error("„Ç´„ÉÜ„Ç¥„É™„Éº„Çí‰øùÂ≠ò„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ",n.stack||n)}}}var Tt={namespaced:!0,state:()=>({article:null,articleId:null}),mutations:{setArticle(t,e){const a=null==e||null==e.text?null:b()(e.text);t.article={html:a,...e}},setArticleId(t,e){t.articleId=e}},actions:{async loadSetting({commit:t,rootGetters:e}){const{articleService:a,settingService:i}=e.getDependances(),{articleId:r}=await i.getSidebarSetting();if(null==r)return t("setArticleId",null),void t("setArticle",null);const s=await a.get({articleId:r}),n=s[0];t("setArticleId",r),t("setArticle",n)},async setArticleId({commit:t,rootGetters:e},a){const{settingService:i}=e.getDependances();await i.setSidebarArticleId(a),t("setArticleId",a)}}};const It=new bt,St=new xt["a"],Pt=new Ct["a"](St),kt=new _t["a"](St),Mt=new At(kt),Ot=new wt["a"](Pt,kt),jt={articlesDatabase:St,articleRepository:Pt,articleService:Ot,settingService:null};i["default"].use(p["a"]);var Vt=new p["a"].Store({state:{articles:[],categoryId:null,categories:[],selectedTagTexts:[]},getters:{allTags(t){const e=t.articles.map(t=>{var e;return null!==(e=t.tags)&&void 0!==e?e:[]}).reduce((t,e)=>(e.filter(e=>!1===t.includes(e)).forEach(e=>t.push(e)),t),[]);return e.map(e=>{const a=t.selectedTagTexts.includes(e);return{selected:a,text:e,value:e}})},getDependances(){return()=>({...jt})}},mutations:{selectTagText(t,{text:e,selected:a}){var i,r;const s=t.categories.filter(e=>e.id===t.categoryId),n=null!==(i=null===(r=s[0])||void 0===r?void 0:r.tagSelectionMode)&&void 0!==i?i:"single",o=t.selectedTagTexts.includes(e);"single"!==n?o?!1===a&&(t.selectedTagTexts=t.selectedTagTexts.filter(t=>t!==e)):a&&t.selectedTagTexts.push(e):t.selectedTagTexts=o?[]:[e]},setArticleExpand(t,{id:e,expanded:a}){t.articles.filter(t=>t.id===e).forEach(t=>{t.expanded=a})},setArticles(t,e){t.articles=e},setCategories(t,{autoSelect:e,categories:a}){t.categories=a,a.length>0&&null==t.categoryId&&(t.categoryId=a[0].id)},setCategoryId(t,e){t.categoryId=e,t.selectedTagTexts=[]},setCategorySettings(t,{categoryId:e,articlesViewMode:a,tagPosition:i,tagSelectionMode:r}){t.categories.filter(t=>t.id===e).forEach(t=>{t.articlesViewMode=null!==a&&void 0!==a?a:t.articlesViewMode,t.tagPosition=null!==i&&void 0!==i?i:t.tagPosition,t.tagSelectionMode=null!==r&&void 0!==r?r:t.tagSelectionMode})}},actions:{async exportArticles(t,{categoryId:e}){const a=await Ot.get({categoryId:e});Pt.export(a)},async loadArticles(t,e){const a=await Ot.get({categoryId:e}),i=It.fromArticles(a);t.commit("setArticles",i),t.commit("setCategoryId",e)},async loadCategories({commit:t,dispatch:e,state:a}){const i=await kt.getAll();t("setCategories",{autoSelect:!0,categories:i}),null!=a.categoryId&&await e("loadArticles",a.categoryId)},setArticleExpanded(t,{id:e,expanded:a}){t.commit("setArticleExpand",{id:e,expanded:a}),Ot.setExpanding(e,a)},async setArticlesViewModeToCategory(t,{categoryId:e,articlesViewMode:a}){console.log("store...",{categoryId:e,articlesViewMode:a}),t.commit("setCategorySettings",{categoryId:e,articlesViewMode:a}),await Mt.setSettings(e,{articlesViewMode:a})},async setCategorySettings(t,{categoryId:e,tagPosition:a,tagSelectionMode:i}){t.commit("setCategorySettings",{categoryId:e,tagPosition:a,tagSelectionMode:i}),await Mt.setSettings(e,{tagPosition:a,tagSelectionMode:i})}},modules:{sidebar:Tt}}),Et=a("5f5b"),Bt=(a("f9e3"),a("2dd8"),function(){var t=this,e=t._self._c;return e("b-alert",{attrs:{variant:"warning",show:""}},[t._v(" „Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ ")])}),Nt=[],Rt={name:"NotFoundAlert"},Lt=Rt,$t=Object(n["a"])(Lt,Bt,Nt,!1,null,null,null),Dt=$t.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column h-100"},[t._t("header"),e("div",{staticClass:"flex-grow-1 h-0"},[e("div",{staticClass:"h-100"},[t._t("default")],2)]),t._t("footer")],2)},qt=[],Ht={},Gt=Ht,Jt=(a("313e"),Object(n["a"])(Gt,Ft,qt,!1,null,"bc4d3014",null)),Ut=Jt.exports,zt=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"h-100 container-main",attrs:{fluid:""}},[e("b-row",{staticClass:"h-100"},[t.noSidebar?t._e():e("b-col",{staticClass:"h-100-sm sidebar pr-0",attrs:{cols:"12",sm:"4",md:"3"}},[e("div",{staticClass:"h-100 pr-3"},[t._t("sidebar")],2)]),e("b-col",{class:t.mainPanelClass,attrs:{cols:"12",sm:t.mainPanelSmCols,md:t.mainPanelMdCols}},[t._t("panel-main")],2)],1)],1)},Kt=[],Qt={props:{noSidebar:Boolean,mainPanelScroll:Boolean},computed:{mainPanelClass(){return{"h-100-sm":!0,"panel-main":!0,"overflow-auto":this.mainPanelScroll}},mainPanelSmCols(){return this.noSidebar?12:8},mainPanelMdCols(){return this.noSidebar?12:9}}},Wt=Qt,Xt=(a("3d9f"),Object(n["a"])(Wt,zt,Kt,!1,null,null,null)),Yt=Xt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column h-100"},[t._m(0),t._t("default"),e("div",{staticClass:"mt-auto"}),null!=t.sidebarArticle?e("div",[e("div",{domProps:{innerHTML:t._s(t.sidebarArticle.html)}})]):t._e(),"ArticlesListPage"!=t.$route.name?e("b-form-group",[e("b-button",{attrs:{variant:"link",to:{name:"ArticlesListPage"}}},[e("i",{staticClass:"far fa-newspaper"}),e("span",{staticClass:"ml-2"},[t._v("Ë®ò‰∫ã")])])],1):t._e(),"CategoryPage"!=t.$route.name?e("b-form-group",[e("b-button",{attrs:{variant:"link",to:{name:"CategoryPage"}}},[e("i",{staticClass:"far fa-folder-open"}),e("span",{staticClass:"ml-2"},[t._v("„Ç´„ÉÜ„Ç¥„É™„Éº")])])],1):t._e(),"SettingPage"!=t.$route.name?e("b-form-group",[e("b-button",{attrs:{variant:"link",to:{name:"SettingPage"}}},[e("i",{staticClass:"fas fa-cog"}),e("span",{staticClass:"ml-2"},[t._v("Ë®≠ÂÆö")])])],1):t._e()],2)},te=[function(){var t=this,e=t._self._c;return e("h1",{staticClass:"h2"},[e("span",[t._v("üè†")]),e("span",{staticClass:"site-title-animals"},[t._v("üêïü¶òüê¨üêìüïäü¶¢")])])}],ee={name:"TheSidebar",computed:{sidebarArticle(){return this.$store.state.sidebar.article}},async mounted(){null==this.$store.state.sidebar.articleId&&await this.$store.dispatch("sidebar/loadSetting")}},ae=ee,ie=(a("882f"),Object(n["a"])(ae,Zt,te,!1,null,"2bd5a978",null)),re=ie.exports;class se{constructor(t){this.database=t.instance}async get(t){return await this.database.settings.get(t)}async put(t){try{return await this.database.settings.put(t)}catch(a){var e;console.error(null!==(e=a.stack)&&void 0!==e?e:a)}}}class ne{constructor(t){this.settingRepository=t}async getSidebarSetting(){var t;const{articleId:e}=null!==(t=await this.settingRepository.get("sidebar"))&&void 0!==t?t:{};return{name:"sidebar",articleId:e}}async setSidebarArticleId(t){const e=await this.getSidebarSetting();e.articleId=t,console.log("service sidebar:",e),await this.settingRepository.put(e)}}i["default"].component("NotFoundAlert",Dt),i["default"].component("FullHeight",Ut),i["default"].component("TheMainLayout",Yt),i["default"].component("TheSidebar",re),i["default"].config.productionTip=!1,i["default"].use(Et["a"]);const oe=new se(jt.articlesDatabase),le=new ne(oe);jt.settingService=le,new i["default"]({router:vt,store:Vt,render:t=>t(c)}).$mount("#app")},"6bfa":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("5a0c"),r=a.n(i),s=a("0ecf"),n=a.n(s);r.a.extend(n.a);class o{constructor(t){this.database=t.instance}async addTagsToArticle(t,e){const a=e.map(e=>({articleId:t,tagText:e}));await this.database.articleTags.bulkPut(a)}async deleteTagsFromArticle(t){await this.database.articleTags.bulkDelete(t)}export(t){const e=JSON.stringify({articles:t},null,2),a=new Blob([e],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.target="_blank",i.download="Articles.json",document.body.appendChild(i),i.click(),document.body.removeChild(i)}async getArticles({categoryId:t,articleId:e}){return await this.database.articles.filter(a=>(null==t||a.categoryId===t)&&(null==e||a.id===e)).toArray()}async getArticleTags(t){return await this.database.articleTags.filter(e=>t.includes(e.articleId)).toArray()}async getTagTexts(t){return await this.database.articleTags.filter(e=>e.articleId===t).toArray()}async setArticle({id:t,categoryId:e,expanded:a,title:i,text:s}){const n=r.a.utc().format();return await this.database.articles.put({id:t,categoryId:e,expanded:a,title:i,text:s,updatedOn:n})}}},"882f":function(t,e,a){"use strict";a("5153")},baad:function(t,e,a){"use strict";a("d21e")},cb3b:function(t,e,a){"use strict";a("4c77")},d21e:function(t,e,a){},ff8a:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("4dec");class r{constructor(){this.instance=new i["a"]("articlesDatabase"),this.instance.version(2).stores({articles:"++id, categoryId, title, text, createdOn, updatedOn",articleTags:"++id, articleId, tagText",categories:"++id, title",settings:"name"}),this.instance.version(1).stores({articles:"++id, categoryId, title, text, createdOn, updatedOn",articleTags:"++id, articleId, tagText",categories:"++id, title"})}delete(){i["a"].delete("articlesDatabase")}}}});
//# sourceMappingURL=app.489ee1ad.js.map