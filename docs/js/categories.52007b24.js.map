{"version":3,"sources":["webpack:///./src/views/categories/CategoryImportPage.vue?8531","webpack:///./src/infrastructure/ArticleJsonParser.js","webpack:///src/views/categories/CategoryImportPage.vue","webpack:///./src/views/categories/CategoryImportPage.vue?68da","webpack:///./src/views/categories/CategoryImportPage.vue","webpack:///./src/views/categories/CategoryPage.vue?dceb","webpack:///src/views/categories/CategoryPage.vue","webpack:///./src/views/categories/CategoryPage.vue?5822","webpack:///./src/views/categories/CategoryPage.vue","webpack:///./src/views/categories/CategorySettingPage.vue?acdd","webpack:///src/views/categories/CategorySettingPage.vue","webpack:///./src/views/categories/CategorySettingPage.vue?5d31","webpack:///./src/views/categories/CategorySettingPage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","slot","staticClass","category","_v","_s","title","file","on","fileSelect","model","value","callback","$$v","expression","directives","name","rawName","importButton","disabled","importButtonClick","_l","article","key","id","_e","staticRenderFns","ArticleJsonParser","readFileAsText","json","articles","JSON","parse","succeeded","message","console","log","exception","Promise","resolve","reader","FileReader","onload","result","readAsText","data","categoryId","computed","visible","watch","$route","to","mounted","methods","articleJsonParser","completed","forEach","text","tags","articleService","loadCategory","categoryRepository","component","cardNewCategoryName","cardNewCategoryCreateButtonDisabled","createCategoryButtonClick","$store","state","params","$event","exportButtonClick","get","set","cardNewCategory","created","tagSelectionMode","tagSelection","options","tagSelectionSelected","tagsPosition","tagPositionSelected","tagPosition"],"mappings":"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","file":"js/categories.52007b24.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('TheMainLayout',{attrs:{\"main-panel-scroll\":\"\"}},[_c('TheSidebar',{attrs:{\"slot\":\"sidebar\"},slot:\"sidebar\"}),_c('div',{staticClass:\"h-100\",attrs:{\"slot\":\"panel-main\"},slot:\"panel-main\"},[(_vm.category == null)?_c('NotFoundAlert'):_c('div',{staticClass:\"h-100\"},[_c('h2',[_vm._v(\"記事を\"+_vm._s(_vm.category.title)+\"にインポート\")]),_c('b-form-group',[_c('b-form-file',{attrs:{\"value\":_vm.file,\"accept\":\"application/json\",\"placeholder\":\"Choose a file or drop it here...\",\"drop-placeholder\":\"Drop file here...\"},on:{\"input\":_vm.fileSelect},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1),_c('div',{staticClass:\"d-flex\"},[_c('b-form-group',{staticClass:\"ml-auto\"},[_c('b-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.importButton.visible),expression:\"importButton.visible\"}],attrs:{\"disabled\":_vm.importButton.disabled,\"variant\":\"primary\"},on:{\"click\":_vm.importButtonClick}},[_vm._v(\" 選択をインポート \")])],1)],1),_c('b-list-group',_vm._l((_vm.articles),function(article){return _c('b-list-group-item',{key:article.id,staticClass:\"d-flex\"},[_c('div',[_vm._v(_vm._s(article.title))]),(article.completed)?_c('b-badge',{staticClass:\"ml-auto\",attrs:{\"variant\":\"info\"}},[_vm._v(\" 済 \")]):_vm._e()],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default class ArticleJsonParser {\r\n  async parse (file) {\r\n    try {\r\n      const json = await this.readFileAsText(file)\r\n      const articles = JSON.parse(json).articles\r\n      return { succeeded: true, articles }\r\n    } catch (ex) {\r\n      const message = 'ファイルの読み込みに失敗しました。'\r\n      console.log(message, ex)\r\n      return { succeeded: false, exception: ex, message }\r\n    }\r\n  }\r\n\r\n  async readFileAsText (file) {\r\n    return await new Promise(resolve => {\r\n      const reader = new FileReader()\r\n      reader.onload = () => resolve(reader.result)\r\n      reader.readAsText(file)\r\n    })\r\n  }\r\n}\r\n","<template>\r\n  <TheMainLayout main-panel-scroll>\r\n    <TheSidebar slot=\"sidebar\"/>\r\n    <div\r\n      slot=\"panel-main\"\r\n      class=\"h-100\"\r\n    >\r\n      <NotFoundAlert v-if=\"category == null\"/>\r\n      <div\r\n        v-else\r\n        class=\"h-100\"\r\n      >\r\n        <h2>記事を{{ category.title }}にインポート</h2>\r\n        <b-form-group>\r\n          <b-form-file\r\n            v-model=\"file\"\r\n            :value=\"file\"\r\n            @input=\"fileSelect\"\r\n            accept=\"application/json\"\r\n            placeholder=\"Choose a file or drop it here...\"\r\n            drop-placeholder=\"Drop file here...\"\r\n          />\r\n        </b-form-group>\r\n        <div class=\"d-flex\">\r\n          <b-form-group class=\"ml-auto\">\r\n            <b-button\r\n              :disabled=\"importButton.disabled\"\r\n              v-show=\"importButton.visible\"\r\n              variant=\"primary\"\r\n              @click=\"importButtonClick\"\r\n            >\r\n              選択をインポート\r\n            </b-button>\r\n          </b-form-group>\r\n        </div>\r\n        <b-list-group>\r\n          <b-list-group-item\r\n            v-for=\"article in articles\"\r\n            :key=\"article.id\"\r\n            class=\"d-flex\"\r\n          >\r\n            <div>{{ article.title }}</div>\r\n            <b-badge\r\n              v-if=\"article.completed\"\r\n              variant=\"info\"\r\n              class=\"ml-auto\"\r\n            >\r\n              済\r\n            </b-badge>\r\n          </b-list-group-item>\r\n        </b-list-group>\r\n      </div>\r\n    </div>\r\n  </TheMainLayout>\r\n</template>\r\n\r\n<script>\r\nimport ArticleJsonParser from '@/infrastructure/ArticleJsonParser.js'\r\nimport ArticleRepository from '@/infrastructure/ArticleRepository.js'\r\nimport ArticleService from '@/usecases/ArticleService.js'\r\nimport ArticlesDatabase from '@/infrastructure/ArticlesDatabase.js'\r\nimport CategoryRepository from '@/infrastructure/CategoryRepository.js'\r\n\r\nconst articlesDatabase = new ArticlesDatabase()\r\nconst categoryRepository = new CategoryRepository(articlesDatabase)\r\nconst articleJsonParser = new ArticleJsonParser()\r\nconst articleRepository = new ArticleRepository(articlesDatabase)\r\nconst articleService = new ArticleService(articleRepository, categoryRepository)\r\n\r\nexport default {\r\n  name: 'CategoryImportPage',\r\n\r\n  data () {\r\n    return {\r\n      articles: [],\r\n      category: null,\r\n      categoryId: null,\r\n      file: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    importButton () {\r\n      const count = this.articles == null\r\n        ? 0\r\n        : this.articles.length\r\n\r\n      const nonCompletedCount = this.articles == null\r\n        ? 0\r\n        : this.articles.filter(article => !article.completed).length\r\n\r\n      const disabled = nonCompletedCount <= 0 || this.file == null\r\n      const visible = count > 0 && this.file != null\r\n      return { disabled, visible }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    $route (to) {\r\n      this.categoryId = parseInt(to.params.id)\r\n      this.loadCategory()\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.categoryId = parseInt(this.$route.params.id)\r\n    this.loadCategory()\r\n  },\r\n\r\n  methods: {\r\n    async fileSelect (file) {\r\n      this.file = file\r\n      const { succeeded, articles } = await articleJsonParser.parse(file)\r\n      if (succeeded) {\r\n        this.articles = articles.map(article => {\r\n          return { ...article, completed: false }\r\n        })\r\n      }\r\n    },\r\n    async importButtonClick () {\r\n      this.articles.filter(article => !article.computed)\r\n        .forEach(async article => {\r\n          const { title, text, tags } = article\r\n          const categoryId = this.categoryId\r\n          await articleService.set({ categoryId, title, text, tags })\r\n          article.completed = true\r\n        })\r\n    },\r\n    async loadCategory () {\r\n      this.category = await categoryRepository.get(this.categoryId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryImportPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryImportPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryImportPage.vue?vue&type=template&id=58ff69d3&\"\nimport script from \"./CategoryImportPage.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryImportPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('TheMainLayout',{attrs:{\"main-panel-scroll\":\"\"}},[_c('TheSidebar',{attrs:{\"slot\":\"sidebar\"},slot:\"sidebar\"}),_c('div',{staticClass:\"h-100\",attrs:{\"slot\":\"panel-main\"},slot:\"panel-main\"},[_c('h2',[_vm._v(\"カテゴリー\")]),_c('section',{staticClass:\"section-new-card\"},[_c('h3',[_vm._v(\"新規作成\")]),_c('b-card',{staticClass:\"card-new-category\"},[_c('b-form-group',{attrs:{\"label\":\"名称\"}},[_c('b-input',{model:{value:(_vm.cardNewCategoryName),callback:function ($$v) {_vm.cardNewCategoryName=$$v},expression:\"cardNewCategoryName\"}})],1),_c('b-form-group',{staticClass:\"mb-0\",attrs:{\"label-sr-only\":\"\"}},[_c('b-button',{attrs:{\"disabled\":_vm.cardNewCategoryCreateButtonDisabled,\"variant\":\"primary\"},on:{\"click\":_vm.createCategoryButtonClick}},[_vm._v(\" 作成 \")])],1)],1)],1),_c('section',{staticClass:\"section-list\"},[_c('h3',[_vm._v(\"一覧\")]),_vm._l((_vm.$store.state.categories),function(category){return _c('b-card',{key:category.id,attrs:{\"body-class\":\"d-flex\"}},[_c('div',[_vm._v(\" \"+_vm._s(category.title)+\" \")]),_c('div',{staticClass:\"ml-auto h-interval\"},[_c('router-link',{attrs:{\"to\":{name: 'CategoryImportPage', params: {id: category.id}}}},[_vm._v(\" インポート \")]),_c('b-button',{attrs:{\"variant\":\"info\"},on:{\"click\":function($event){return _vm.exportButtonClick(category)}}},[_c('i',{staticClass:\"fas fa-download\"}),_vm._v(\" エクスポート \")])],1)])})],2)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <TheMainLayout main-panel-scroll>\r\n    <TheSidebar slot=\"sidebar\"/>\r\n\r\n    <div slot=\"panel-main\" class=\"h-100\">\r\n      <h2>カテゴリー</h2>\r\n      <section class=\"section-new-card\">\r\n        <h3>新規作成</h3>\r\n        <b-card class=\"card-new-category\">\r\n          <b-form-group label=\"名称\">\r\n            <b-input v-model=\"cardNewCategoryName\" />\r\n          </b-form-group>\r\n\r\n          <b-form-group label-sr-only class=\"mb-0\">\r\n            <b-button\r\n              :disabled=\"cardNewCategoryCreateButtonDisabled\"\r\n              variant=\"primary\"\r\n              @click=\"createCategoryButtonClick\"\r\n            >\r\n              作成\r\n            </b-button>\r\n          </b-form-group>\r\n        </b-card>\r\n      </section>\r\n      <section class=\"section-list\">\r\n        <h3>一覧</h3>\r\n        <b-card\r\n          v-for=\"category in $store.state.categories\"\r\n          :key=\"category.id\"\r\n          body-class=\"d-flex\"\r\n        >\r\n          <div>\r\n            {{ category.title }}\r\n          </div>\r\n          <div class=\"ml-auto h-interval\">\r\n            <router-link\r\n              :to=\"{name: 'CategoryImportPage', params: {id: category.id}}\"\r\n            >\r\n              インポート\r\n            </router-link>\r\n            <b-button\r\n              variant=\"info\"\r\n              @click=\"exportButtonClick(category)\"\r\n            >\r\n              <i class=\"fas fa-download\"/>\r\n              エクスポート\r\n            </b-button>\r\n          </div>\r\n        </b-card>\r\n      </section>\r\n    </div>\r\n  </TheMainLayout>\r\n</template>\r\n\r\n<script>\r\nimport ArticlesDatabase from '@/infrastructure/ArticlesDatabase.js'\r\nimport CategoryRepository from '@/infrastructure/CategoryRepository.js'\r\n\r\nconst articlesDatabase = new ArticlesDatabase()\r\nconst categoryRepository = new CategoryRepository(articlesDatabase)\r\n\r\nexport default {\r\n  name: 'CategoryPage',\r\n\r\n  computed: {\r\n    cardNewCategoryCreateButtonDisabled () {\r\n      const { created, name } = this.cardNewCategory\r\n      return created || name == null || name.length <= 0\r\n    },\r\n    cardNewCategoryName: {\r\n      get () {\r\n        return this.cardNewCategory.name\r\n      },\r\n      set (value) {\r\n        this.cardNewCategory.name = value\r\n        this.cardNewCategory.created = false\r\n      }\r\n    }\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      cardNewCategory: {\r\n        created: false,\r\n        name: ''\r\n      }\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.$store.dispatch('loadCategories')\r\n  },\r\n\r\n  methods: {\r\n    async createCategoryButtonClick () {\r\n      this.cardNewCategory.created = true\r\n      const title = this.cardNewCategory.name\r\n      const tagSelectionMode = 'single'\r\n      const categoryId = await categoryRepository.put({ title, tagSelectionMode })\r\n      console.log('Category created. categoryId:', categoryId)\r\n      this.$store.dispatch('loadCategories')\r\n    },\r\n    async exportButtonClick (category) {\r\n      const categoryId = category.id\r\n      this.$store.dispatch('exportArticles', { categoryId })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategoryPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategoryPage.vue?vue&type=template&id=47338355&\"\nimport script from \"./CategoryPage.vue?vue&type=script&lang=js&\"\nexport * from \"./CategoryPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('TheMainLayout',{attrs:{\"main-panel-scroll\":\"\"}},[_c('TheSidebar',{attrs:{\"slot\":\"sidebar\"},slot:\"sidebar\"}),_c('div',{staticClass:\"h-100\",attrs:{\"slot\":\"panel-main\"},slot:\"panel-main\"},[(_vm.category == null)?_c('NotFoundAlert'):_c('div',{staticClass:\"h-100\"},[_c('h2',[_vm._v(_vm._s(_vm.category.title)+\"の設定\")]),_c('b-form',[_c('b-form-group',{attrs:{\"label\":\"タグの選択\",\"label-cols\":\"4\"}},[_c('b-radio-group',{attrs:{\"name\":\"tagsSelection\",\"options\":_vm.tagSelection.options},model:{value:(_vm.tagSelectionSelected),callback:function ($$v) {_vm.tagSelectionSelected=$$v},expression:\"tagSelectionSelected\"}})],1),_c('b-form-group',{attrs:{\"label\":\"タグの表示位置\",\"label-cols\":\"4\"}},[_c('b-radio-group',{attrs:{\"name\":\"tagsPosition\",\"options\":_vm.tagsPosition.options},model:{value:(_vm.tagPositionSelected),callback:function ($$v) {_vm.tagPositionSelected=$$v},expression:\"tagPositionSelected\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <TheMainLayout main-panel-scroll>\r\n    <TheSidebar slot=\"sidebar\"/>\r\n    <div\r\n      slot=\"panel-main\"\r\n      class=\"h-100\"\r\n    >\r\n      <NotFoundAlert v-if=\"category == null\"/>\r\n      <div\r\n        v-else\r\n        class=\"h-100\"\r\n      >\r\n        <h2>{{ category.title }}の設定</h2>\r\n\r\n        <b-form>\r\n          <b-form-group label=\"タグの選択\" label-cols=\"4\">\r\n            <b-radio-group\r\n              name=\"tagsSelection\"\r\n              :options=\"tagSelection.options\"\r\n              v-model=\"tagSelectionSelected\"\r\n            />\r\n          </b-form-group>\r\n\r\n          <b-form-group label=\"タグの表示位置\" label-cols=\"4\">\r\n            <b-radio-group\r\n              name=\"tagsPosition\"\r\n              :options=\"tagsPosition.options\"\r\n              v-model=\"tagPositionSelected\"\r\n            />\r\n          </b-form-group>\r\n        </b-form>\r\n      </div>\r\n    </div>\r\n  </TheMainLayout>\r\n</template>\r\n\r\n<script>\r\nimport ArticlesDatabase from '@/infrastructure/ArticlesDatabase.js'\r\nimport CategoryRepository from '@/infrastructure/CategoryRepository.js'\r\n\r\nconst articlesDatabase = new ArticlesDatabase()\r\nconst categoryRepository = new CategoryRepository(articlesDatabase)\r\n\r\nexport default {\r\n  name: 'CategorySettingPage',\r\n\r\n  data () {\r\n    return {\r\n      category: null,\r\n      categoryId: null,\r\n      tagsPosition: {\r\n        options: [\r\n          { text: 'タイトルの右', value: 'right' },\r\n          { text: 'タイトルの下', value: 'bottom' }\r\n        ]\r\n      },\r\n      tagSelection: {\r\n        options: [\r\n          { text: '最大1個', value: 'single' },\r\n          { text: '複数', value: 'multiple' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    tagPositionSelected: {\r\n      get () {\r\n        return this.category?.tagPosition ?? 'right'\r\n      },\r\n      async set (tagPosition) {\r\n        const { categoryId } = this\r\n        await this.$store.dispatch('setCategorySettings', { categoryId, tagPosition })\r\n        await this.loadCategory()\r\n      }\r\n    },\r\n    tagSelectionSelected: {\r\n      get () {\r\n        return this.category?.tagSelectionMode ?? 'single'\r\n      },\r\n      async set (tagSelectionMode) {\r\n        const { categoryId } = this\r\n        await this.$store.dispatch('setCategorySettings', { categoryId, tagSelectionMode })\r\n        await this.loadCategory()\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    $route (to) {\r\n      this.categoryId = parseInt(to.params.categoryId)\r\n      this.loadCategory()\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.categoryId = parseInt(this.$route.params.categoryId)\r\n    this.loadCategory()\r\n  },\r\n\r\n  methods: {\r\n    async loadCategory () {\r\n      this.category = await categoryRepository.get(this.categoryId)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategorySettingPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CategorySettingPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CategorySettingPage.vue?vue&type=template&id=3973ba4a&\"\nimport script from \"./CategorySettingPage.vue?vue&type=script&lang=js&\"\nexport * from \"./CategorySettingPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}