"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[267],{9730:function(l,e,a){a.r(e),a.d(e,{default:function(){return h}});var t=a(690),n=a(9977);a(8852);class s{async parse(l){try{const e=await this.readFileAsText(l),a=JSON.parse(e).articles;return{succeeded:!0,articles:a}}catch(e){const l="ファイルの読み込みに失敗しました。";return console.log(l,e),{succeeded:!1,exception:e,message:l}}}async readFileAsText(l){return await new Promise((e=>{const a=new FileReader;a.onload=()=>e(a.result),a.readAsText(l)}))}}var o=a(2974),i=a(9401),c=a(4334),u=a(9568);const r={class:"h-100"},d={key:1,class:"h-100"},m={class:"form-group"},p={class:"custom-file b-form-file"},g={class:"d-flex"},v={class:"form-group ml-auto"},_=["disabled"],w={class:"list-group"},b={key:0,class:"badge bdge-info ml-auto"};var f={__name:"CategoryImportPage",setup(l){const e=new c.Z,a=new u.Z(e),f=new s,y=new o.Z(e),h=new i.Z(y,a),S=(0,n.yj)(),k=(0,t.iH)([]),U=(0,t.iH)(null),P=(0,t.iH)(null),x=(0,t.iH)(null),C=(0,t.Fl)((()=>{const l=k.value?.length??0,e=k.value?.filter((l=>!l.completed)).length??0,a=e<=0||null==x.value,t=l>0&&null!=x.value;return{disabled:a,visible:t}})),F=async()=>{U.value=await a.get(P.value)},I=async l=>{if(console.log(l.target.files[0]),x.value=l.target.files[0],null==x.value)return;const e=await f.parse(x.value);e.succeeded&&(k.value=e.articles.map((l=>({...l,completed:!1}))))},H=()=>{k.value.filter((l=>!l.computed)).forEach((async l=>{const{title:e,text:a,tags:t}=l;await h.set({categoryId:P.value,title:e,text:a,tags:t}),l.completed=!0}))};return(0,t.bv)((()=>{P.value=parseInt(S.params.id),F()})),(0,t.YP)((()=>S.params.id),(async l=>{P.value=parseInt(l),loadArticle()})),(l,e)=>{const a=(0,t.up)("TheSidebar"),n=(0,t.up)("NotFoundAlert"),s=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(s,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",r,[null==U.value?((0,t.wg)(),(0,t.j4)(n,{key:0})):((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("h2",null,"記事を"+(0,t.zw)(U.value.title)+"にインポート",1),(0,t._)("fieldset",m,[(0,t._)("div",p,[(0,t._)("input",{type:"file",accept:"application/json",onChange:I},null,32)])]),(0,t._)("div",g,[(0,t._)("fieldset",v,[(0,t.wy)((0,t._)("button",{disabled:(0,t.SU)(C).disabled,class:"btn btn-primary",onClick:H}," 選択をインポート ",8,_),[[t.F8,(0,t.SU)(C).visible]])])]),(0,t._)("div",w,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,(l=>((0,t.wg)(),(0,t.iD)("div",{class:"list-group-item d-flex",key:l.id},[(0,t._)("div",null,(0,t.zw)(l.title),1),l.completed?((0,t.wg)(),(0,t.iD)("span",b," 済 ")):(0,t.kq)("",!0)])))),128))])]))])])),_:1})}}};const y=f;var h=y},1691:function(l,e,a){a.r(e),a.d(e,{default:function(){return C}});var t=a(690),n=a(3556),s=a(7540),o=a(9128),i=a(4334),c=a(9568);const u={class:"h-100"},r=(0,t._)("h2",null,"カテゴリー",-1),d={class:"section-new-card"},m=(0,t._)("h3",null,"新規作成",-1),p={class:"card card-new-category"},g={class:"card-body"},v={class:"form-group",label:"名称"},_=(0,t._)("legend",{tabindex:"-1",class:"col-form-label pt-0"}," 名称 ",-1),w={class:"form-group mb-0"},b=["disabled"],f={class:"section-list"},y=(0,t._)("h3",null,"一覧",-1),h={class:"card-body d-flex"},S={class:"ml-auto h-interval"},k=["onClick"],U=(0,t._)("i",{class:"fas fa-download"},null,-1);var P={__name:"CategoryPage",setup(l){const e=new i.Z,a=new c.Z(e),P=(0,t.iH)({created:!1,name:""}),x=(0,t.Fl)((()=>{const{created:l,name:e}=P.value;return l||null==e||e.length<=0})),C=(0,t.Fl)({get(){return P.value.name},set(l){P.value.name=l,P.value.created=!1}});(0,t.bv)((()=>{(0,n.Uy)()}));const F=async()=>{P.value.created=!0;const l=P.value.name,e="single";await a.put({title:l,tagSelectionMode:e}),(0,n.Uy)(),P.value.name=""},I=l=>{(0,s.$1)(l.id)};return(l,e)=>{const a=(0,t.up)("TheSidebar"),n=(0,t.up)("router-link"),s=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(s,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",u,[r,(0,t._)("section",d,[m,(0,t._)("div",p,[(0,t._)("div",g,[(0,t._)("fieldset",v,[_,(0,t.wy)((0,t._)("input",{class:"form-control",type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>(0,t.dq)(C)?C.value=l:null)},null,512),[[t.nr,(0,t.SU)(C)]])]),(0,t._)("fieldset",w,[(0,t._)("button",{disabled:(0,t.SU)(x),class:"btn btn-primary",onClick:F}," 作成 ",8,b)])])])]),(0,t._)("section",f,[y,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,t.SU)(o.ns),(l=>((0,t.wg)(),(0,t.iD)("div",{class:"card",key:l.id},[(0,t._)("div",h,[(0,t._)("div",null,(0,t.zw)(l.title),1),(0,t._)("div",S,[(0,t.Wm)(n,{to:{name:"CategoryImportPage",params:{id:l.id}}},{default:(0,t.w5)((()=>[(0,t.Uk)(" インポート ")]),void 0,!0),_:2},1032,["to"]),(0,t._)("button",{class:"btn btn-info",onClick:e=>I(l)},[U,(0,t.Uk)(" エクスポート ")],8,k)])])])))),128))])])])),_:1})}}};const x=P;var C=x},39:function(l,e,a){a.r(e),a.d(e,{default:function(){return F}});var t=a(690),n=a(9977),s=a(4334),o=a(9568),i=a(3556);const c={slot:"panel-main",class:"h-100"},u={key:1,class:"h-100"},r={class:"form-group"},d={class:"form-row"},m=(0,t._)("legend",{tabindex:"-1",class:"col-4 col-form-label pt-0"}," タグの選択 ",-1),p={class:"col"},g={class:"custom-control custom-control-inline custom-radio"},v=(0,t._)("label",{class:"custom-control-label",for:"tagsSelection-single"},[(0,t._)("span",null,"最大1個")],-1),_={class:"custom-control custom-control-inline custom-radio"},w=(0,t._)("label",{class:"custom-control-label",for:"tagsSelection-multiple"},[(0,t._)("span",null,"複数")],-1),b={class:"form-group"},f={class:"form-row"},y=(0,t._)("legend",{tabindex:"-1",class:"col-4 col-form-label pt-0"}," タグの表示位置 ",-1),h={class:"col"},S={class:"custom-control custom-control-inline custom-radio"},k=(0,t._)("label",{class:"custom-control-label",for:"tagsPosition-right"},[(0,t._)("span",null,"タイトルの右")],-1),U={class:"custom-control custom-control-inline custom-radio"},P=(0,t._)("label",{class:"custom-control-label",for:"tagsPosition-bottom"},[(0,t._)("span",null,"タイトルの下")],-1);var x={__name:"CategorySettingPage",setup(l){const e=new s.Z,a=new o.Z(e),x=(0,t.iH)(null),C=(0,t.iH)(null),F=(0,n.yj)(),I=async()=>{x.value=await a.get(C.value)},H=(0,t.Fl)({get(){return x.value?.tagPosition??"right"},async set(l){await(0,i.ag)({categoryId:C.value,tagPosition:l}),await I()}}),T=(0,t.Fl)({get(){return x.value?.tagSelectionMode??"single"},async set(l){console.log("tagSelectionSelected set",l),await(0,i.ag)({categoryId:C.value,tagSelectionMode:l}),await I()}});return(0,t.YP)((()=>F.params.categoryId),(async l=>{C.value=parseInt(l),I()})),(0,t.bv)((()=>{C.value=parseInt(F.params.categoryId),I()})),(l,e)=>{const a=(0,t.up)("TheSidebar"),n=(0,t.up)("NotFoundAlert"),s=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(s,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",c,[null==x.value?((0,t.wg)(),(0,t.j4)(n,{key:0})):((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("h2",null,(0,t.zw)(x.value.title)+"の設定",1),(0,t._)("form",null,[(0,t._)("fieldset",r,[(0,t._)("div",d,[m,(0,t._)("div",p,[(0,t._)("div",g,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsSelection",value:"single","onUpdate:modelValue":e[0]||(e[0]=l=>(0,t.dq)(T)?T.value=l:null),id:"tagsSelection-single"},null,512),[[t.G2,(0,t.SU)(T)]]),v]),(0,t._)("div",_,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsSelection",value:"multiple","onUpdate:modelValue":e[1]||(e[1]=l=>(0,t.dq)(T)?T.value=l:null),id:"tagsSelection-multiple"},null,512),[[t.G2,(0,t.SU)(T)]]),w])])])]),(0,t._)("fieldset",b,[(0,t._)("div",f,[y,(0,t._)("div",h,[(0,t._)("div",S,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsPosition",value:"right","onUpdate:modelValue":e[2]||(e[2]=l=>(0,t.dq)(H)?H.value=l:null),id:"tagsPosition-right"},null,512),[[t.G2,(0,t.SU)(H)]]),k]),(0,t._)("div",U,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsPosition",value:"bottom","onUpdate:modelValue":e[3]||(e[3]=l=>(0,t.dq)(H)?H.value=l:null),id:"tagsPosition-bottom"},null,512),[[t.G2,(0,t.SU)(H)]]),P])])])])])]))])])),_:1})}}};const C=x;var F=C}}]);
//# sourceMappingURL=categories.58a104e7.js.map