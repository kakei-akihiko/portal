"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[267],{9730:function(e,l,a){a.r(l),a.d(l,{default:function(){return h}});var t=a(690),n=a(9977);a(1963);class s{async parse(e){try{const l=await this.readFileAsText(e),a=JSON.parse(l).articles;return{succeeded:!0,articles:a}}catch(l){const e="ファイルの読み込みに失敗しました。";return console.log(e,l),{succeeded:!1,exception:l,message:e}}}async readFileAsText(e){return await new Promise((l=>{const a=new FileReader;a.onload=()=>l(a.result),a.readAsText(e)}))}}var o=a(2974),i=a(9401),c=a(4334),u=a(9568);const r={class:"h-100"},d={key:1,class:"h-100"},m={class:"form-group"},p={class:"custom-file b-form-file"},g={class:"d-flex"},v={class:"form-group ml-auto"},_=["disabled"],w={class:"list-group"},y={key:0,class:"badge bdge-info ml-auto"};var b={__name:"CategoryImportPage",setup(e){const l=new c.Z,a=new u.Z(l),b=new s,f=new o.Z(l),h=new i.Z(f,a),S=(0,n.yj)(),k=(0,t.iH)([]),U=(0,t.iH)(null),P=(0,t.iH)(null),x=(0,t.iH)(null),C=(0,t.Fl)((()=>{const e=k.value?.length??0,l=k.value?.filter((e=>!e.completed)).length??0,a=l<=0||null==x.value,t=e>0&&null!=x.value;return{disabled:a,visible:t}})),F=async()=>{U.value=await a.get(P.value)},I=async e=>{if(console.log(e.target.files[0]),x.value=e.target.files[0],null==x.value)return;const l=await b.parse(x.value);l.succeeded&&(k.value=l.articles.map((e=>({...e,completed:!1}))))},H=()=>{k.value.filter((e=>!e.computed)).forEach((async e=>{const{title:l,text:a,tags:t}=e;await h.set({categoryId:P.value,title:l,text:a,tags:t}),e.completed=!0}))};return(0,t.bv)((()=>{P.value=parseInt(S.params.id),F()})),(0,t.YP)((()=>S.params.id),(async e=>{P.value=parseInt(e),loadArticle()})),(e,l)=>{const a=(0,t.up)("TheSidebar"),n=(0,t.up)("NotFoundAlert"),s=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(s,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",r,[null==U.value?((0,t.wg)(),(0,t.j4)(n,{key:0})):((0,t.wg)(),(0,t.iD)("div",d,[(0,t._)("h2",null,"記事を"+(0,t.zw)(U.value.title)+"にインポート",1),(0,t._)("fieldset",m,[(0,t._)("div",p,[(0,t._)("input",{type:"file",accept:"application/json",onChange:I},null,32)])]),(0,t._)("div",g,[(0,t._)("fieldset",v,[(0,t.wy)((0,t._)("button",{disabled:(0,t.SU)(C).disabled,class:"btn btn-primary",onClick:H}," 選択をインポート ",8,_),[[t.F8,(0,t.SU)(C).visible]])])]),(0,t._)("div",w,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(k.value,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"list-group-item d-flex",key:e.id},[(0,t._)("div",null,(0,t.zw)(e.title),1),e.completed?((0,t.wg)(),(0,t.iD)("span",y," 済 ")):(0,t.kq)("",!0)])))),128))])]))])])),_:1})}}};const f=b;var h=f},1691:function(e,l,a){a.r(l),a.d(l,{default:function(){return x}});var t=a(690),n=a(3556),s=a(7540),o=a(4334),i=a(9568);const c={class:"h-100"},u=(0,t._)("h2",null,"カテゴリー",-1),r={class:"section-new-card"},d=(0,t._)("h3",null,"新規作成",-1),m={class:"card card-new-category"},p={class:"card-body"},g={class:"form-group",label:"名称"},v=(0,t._)("legend",{tabindex:"-1",class:"col-form-label pt-0"}," 名称 ",-1),_={class:"form-group mb-0"},w=["disabled"],y={class:"section-list"},b=(0,t._)("h3",null,"一覧",-1),f={class:"card-body d-flex"},h={class:"ml-auto h-interval"},S=["onClick"],k=(0,t._)("i",{class:"fas fa-download"},null,-1);var U={__name:"CategoryPage",setup(e){const l=new o.Z,a=new i.Z(l),U=(0,t.iH)({created:!1,name:""}),P=(0,t.Fl)((()=>{const{created:e,name:l}=U.value;return e||null==l||l.length<=0})),x=(0,t.Fl)({get(){return U.value.name},set(e){U.value.name=e,U.value.created=!1}});(0,t.bv)((()=>{(0,n.Uy)()}));const C=async()=>{U.value.created=!0;const e=U.value.name,l="single";await a.put({title:e,tagSelectionMode:l}),(0,n.Uy)(),U.value.name=""},F=e=>{(0,s.$1)(e.id)};return(e,l)=>{const a=(0,t.up)("TheSidebar"),s=(0,t.up)("router-link"),o=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(o,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",c,[u,(0,t._)("section",r,[d,(0,t._)("div",m,[(0,t._)("div",p,[(0,t._)("fieldset",g,[v,(0,t.wy)((0,t._)("input",{class:"form-control",name:"categoryName",type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>(0,t.dq)(x)?x.value=e:null)},null,512),[[t.nr,(0,t.SU)(x)]])]),(0,t._)("fieldset",_,[(0,t._)("button",{disabled:(0,t.SU)(P),class:"btn btn-primary",onClick:C}," 作成 ",8,w)])])])]),(0,t._)("section",y,[b,((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)((0,t.SU)(n.ns),(e=>((0,t.wg)(),(0,t.iD)("div",{class:"card",key:e.id},[(0,t._)("div",f,[(0,t._)("div",null,(0,t.zw)(e.title),1),(0,t._)("div",h,[(0,t.Wm)(s,{to:{name:"CategoryImportPage",params:{id:e.id}}},{default:(0,t.w5)((()=>[(0,t.Uk)(" インポート ")]),void 0,!0),_:2},1032,["to"]),(0,t._)("button",{class:"btn btn-info",onClick:l=>F(e)},[k,(0,t.Uk)(" エクスポート ")],8,S)])])])))),128))])])])),_:1})}}};const P=U;var x=P},39:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var t=a(690),n=a(9977),s=a(4334),o=a(9568),i=a(3556);const c={slot:"panel-main",class:"h-100"},u={key:1,class:"h-100"},r={class:"form-group"},d={class:"form-row"},m=(0,t._)("legend",{tabindex:"-1",class:"col-4 col-form-label pt-0"}," タグの選択 ",-1),p={class:"col"},g={class:"custom-control custom-control-inline custom-radio"},v=(0,t._)("label",{class:"custom-control-label",for:"tagsSelection-single"},[(0,t._)("span",null,"最大1個")],-1),_={class:"custom-control custom-control-inline custom-radio"},w=(0,t._)("label",{class:"custom-control-label",for:"tagsSelection-multiple"},[(0,t._)("span",null,"複数")],-1),y={class:"form-group"},b={class:"form-row"},f=(0,t._)("legend",{tabindex:"-1",class:"col-4 col-form-label pt-0"}," タグの表示位置 ",-1),h={class:"col"},S={class:"custom-control custom-control-inline custom-radio"},k=(0,t._)("label",{class:"custom-control-label",for:"tagsPosition-right"},[(0,t._)("span",null,"タイトルの右")],-1),U={class:"custom-control custom-control-inline custom-radio"},P=(0,t._)("label",{class:"custom-control-label",for:"tagsPosition-bottom"},[(0,t._)("span",null,"タイトルの下")],-1);var x={__name:"CategorySettingPage",setup(e){const l=new s.Z,a=new o.Z(l),x=(0,t.iH)(null),C=(0,t.iH)(null),F=(0,n.yj)(),I=async()=>{x.value=await a.get(C.value)},H=(0,t.Fl)({get(){return x.value?.tagPosition??"right"},async set(e){await(0,i.ag)({categoryId:C.value,tagPosition:e}),await I()}}),T=(0,t.Fl)({get(){return x.value?.tagSelectionMode??"single"},async set(e){console.log("tagSelectionSelected set",e),await(0,i.ag)({categoryId:C.value,tagSelectionMode:e}),await I()}});return(0,t.YP)((()=>F.params.categoryId),(async e=>{C.value=parseInt(e),I()})),(0,t.bv)((()=>{C.value=parseInt(F.params.categoryId),I()})),(e,l)=>{const a=(0,t.up)("TheSidebar"),n=(0,t.up)("NotFoundAlert"),s=(0,t.up)("TheMainLayout");return(0,t.wg)(),(0,t.j4)(s,{"main-panel-scroll":""},{sidebar:(0,t.w5)((()=>[(0,t.Wm)(a)])),"panel-main":(0,t.w5)((()=>[(0,t._)("div",c,[null==x.value?((0,t.wg)(),(0,t.j4)(n,{key:0})):((0,t.wg)(),(0,t.iD)("div",u,[(0,t._)("h2",null,(0,t.zw)(x.value.title)+"の設定",1),(0,t._)("form",null,[(0,t._)("fieldset",r,[(0,t._)("div",d,[m,(0,t._)("div",p,[(0,t._)("div",g,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsSelection",value:"single","onUpdate:modelValue":l[0]||(l[0]=e=>(0,t.dq)(T)?T.value=e:null),id:"tagsSelection-single"},null,512),[[t.G2,(0,t.SU)(T)]]),v]),(0,t._)("div",_,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsSelection",value:"multiple","onUpdate:modelValue":l[1]||(l[1]=e=>(0,t.dq)(T)?T.value=e:null),id:"tagsSelection-multiple"},null,512),[[t.G2,(0,t.SU)(T)]]),w])])])]),(0,t._)("fieldset",y,[(0,t._)("div",b,[f,(0,t._)("div",h,[(0,t._)("div",S,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsPosition",value:"right","onUpdate:modelValue":l[2]||(l[2]=e=>(0,t.dq)(H)?H.value=e:null),id:"tagsPosition-right"},null,512),[[t.G2,(0,t.SU)(H)]]),k]),(0,t._)("div",U,[(0,t.wy)((0,t._)("input",{class:"custom-control-input",type:"radio",name:"tagsPosition",value:"bottom","onUpdate:modelValue":l[3]||(l[3]=e=>(0,t.dq)(H)?H.value=e:null),id:"tagsPosition-bottom"},null,512),[[t.G2,(0,t.SU)(H)]]),P])])])])])]))])])),_:1})}}};const C=x;var F=C}}]);
//# sourceMappingURL=categories.b5cb461e.js.map