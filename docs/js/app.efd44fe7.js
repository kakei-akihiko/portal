(function(t){function e(e){for(var r,a,s=e[0],o=e[1],l=e[2],u=0,d=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);f&&f(e);while(d.length)d.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(c.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i={app:0},c=[];function s(t){return o.p+"js/"+({articles:"articles",categories:"categories",settings:"settings"}[t]||t)+"."+{articles:"6840d30d",categories:"52007b24",settings:"5cd9c625"}[t]+".js"}function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],n={articles:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=new Promise((function(e,n){for(var r="css/"+({articles:"articles",categories:"categories",settings:"settings"}[t]||t)+"."+{articles:"0100e724",categories:"31d6cfe0",settings:"31d6cfe0"}[t]+".css",i=o.p+r,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var l=c[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===i))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===r||u===i)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var r=e&&e.target&&e.target.src||i,c=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete a[t],f.parentNode.removeChild(f),n(c)},f.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var c=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=c);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=s(t);var d=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(f);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}i[t]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var f=u;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"038f":function(t,e,n){},"0f04":function(t,e,n){"use strict";n("d9f6")},"26b9":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("c7eb"),a=n("1da1"),i=n("d4ec"),c=n("bee2"),s=(n("d3b7"),function(){function t(e){Object(i["a"])(this,t),this.database=e.instance}return Object(c["a"])(t,[{key:"get",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.database.categories.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getAll",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.database.categories.toArray());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"put",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){var n,a,i,c,s,o,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.categoryId,a=e.title,i=e.icon,c=e.articlesViewMode,s=e.tagPosition,o=e.tagSelectionMode,t.prev=1,t.next=4,this.database.categories.put({id:n,title:a,icon:i,articlesViewMode:c,tagPosition:s,tagSelectionMode:o});case 4:return l=t.sent,console.log("Inserted. categoryId:",l),t.abrupt("return",l);case 9:t.prev=9,t.t0=t["catch"](1),console.error(t.t0.stack||t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}())},"2bcf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5530"),a=n("c7eb"),i=n("1da1"),c=n("d4ec"),s=n("bee2"),o=(n("d81d"),n("d9e2"),n("4de4"),n("d3b7"),n("a630"),n("3ca3"),n("ddb0"),n("6062"),function(){function t(e,n){Object(c["a"])(this,t),this.articleRepository=e,this.categoryRepository=n}return Object(s["a"])(t,[{key:"get",value:function(){var t=Object(i["a"])(Object(a["a"])().mark((function t(e){var n,r,i,c,s,o=this;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.categoryId,r=e.articleId,t.prev=1,t.next=4,this.articleRepository.getArticles({categoryId:n,articleId:r});case 4:return i=t.sent,c=i.map((function(t){return t.id})),t.next=8,this.articleRepository.getArticleTags(c);case 8:return s=t.sent,t.abrupt("return",i.map((function(t){return o.getResult(t,s)})));case 12:t.prev=12,t.t0=t["catch"](1),console.error("記事読み込めませんでした。",t.t0);case 15:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"set",value:function(){var t=Object(i["a"])(Object(a["a"])().mark((function t(e){var n,r,i,c,s,o,l,u,d,f;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,r=e.categoryId,i=e.expanded,c=e.title,s=e.text,o=e.tags,t.next=3,this.categoryRepository.get(r);case 3:if(l=t.sent,null!=l){t.next=7;break}throw console.error("Specified categoryId not found. categoryId:",r),new Error("Specified categoryId not found. categoryId: "+r);case 7:return t.prev=7,t.next=10,this.articleRepository.setArticle({id:n,categoryId:r,expanded:i,title:c,text:s});case 10:return u=t.sent,console.log("Inserted. articleId:",u),t.next=14,this.articleRepository.getArticleTags([u]);case 14:if(d=t.sent,this.areEqualTagsToArticleTags(o,d)){t.next=21;break}return f=d.map((function(t){return t.id})),t.next=19,this.articleRepository.deleteTagsFromArticle(f);case 19:return t.next=21,this.articleRepository.addTagsToArticle(u,o);case 21:return t.abrupt("return",u);case 24:t.prev=24,t.t0=t["catch"](7),console.error("記事を保存できませんでした。",t.t0.stack||t.t0);case 27:case"end":return t.stop()}}),t,this,[[7,24]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setExpanding",value:function(){var t=Object(i["a"])(Object(a["a"])().mark((function t(e,n){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.articleRepository.getArticles({articleId:e});case 3:if(r=t.sent,!(r.length<=0)){t.next=6;break}throw new Error("Specified articleId not found. articleId: "+e);case 6:r[0].expanded=n,this.articleRepository.setArticle(r[0]),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("記事を保存できませんでした。",t.t0.stack||t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getResult",value:function(t,e){var n=e.filter((function(e){return e.articleId===t.id})).map((function(t){return t.tagText})),a=Array.from(new Set(n).values());return Object(r["a"])(Object(r["a"])({},t),{},{tags:a})}},{key:"areEqualTagsToArticleTags",value:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n].tagText)return!1;return!0}}]),t}())},5467:function(t,e,n){"use strict";n("582c")},"54b6":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],c=(n("034f"),n("2877")),s={},o=Object(c["a"])(s,a,i,!1,null,null,null),l=o.exports,u=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("TheMainLayout",{attrs:{"main-panel-scroll":""}},[n("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"},[n("NavCategories",{staticClass:"mt-3"}),n("FormGroupTagButtons",{staticClass:"mt-3"})],1),n("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[null!=t.selectedCategory?n("ArticleListPageMainPanel",{attrs:{category:t.selectedCategory}}):t._e()],1)],1)},f=[],p=n("c7eb"),g=n("1da1"),b=n("5530"),h=(n("4de4"),n("2f62")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100"},[n("div",{staticClass:"d-flex"},[n("h2",[t._v(t._s(t.category.title))]),n("div",{staticClass:"ml-auto"},[n("b-form-group",[n("ButtonCategorySettingPage",{attrs:{"category-id":t.category.id}}),n("ButtonArticleCreatePage",{attrs:{"category-id":t.category.id}})],1)],1)]),n("div",{staticClass:"command-bar d-flex justify-content-end"},[n("NavArticleViewMode",{attrs:{mode:t.mode},on:{change:t.navViewModeChange}})],1),n("div",{staticClass:"alerts pt-3"},[n("b-alert",{attrs:{show:t.alertCompactOnlyVisible,variant:"warning"}},[t._v(" 詳細モードで可能な記事がありません。コンパクトモードであれば表示できます。 ")]),n("b-alert",{attrs:{show:t.alertDetailOnlyVisible,variant:"warning"}},[t._v(" コンパクトモードで可能な記事がありません。詳細モードであれば表示できます。 ")]),n("b-alert",{attrs:{show:t.alertNoArticle,variant:"warning"}},[t._v(" 検索条件に合致する記事がありません。 ")])],1),t.modeDetailActive?n("div",{staticClass:"pt-3"},t._l(t.articles,(function(e){return n("ArticlePanel",{key:e.id,attrs:{article:e,tagPosition:t.category.tagPosition},on:{expand:function(n){return t.articleExpand(e,n)}}})})),1):t._e(),t.modeCompactActive?n("CampactLinksPanel",{staticClass:"pt-3",attrs:{table:t.table}}):t._e()],1)},m=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"body-class":"py-2"}},[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"mr-auto d-flex flex-column"},[n("div",{staticClass:"title"},[null==t.article.url?n("span",[t._v(t._s(t.article.title))]):n("a",{attrs:{href:t.article.url,target:"_blank"}},[t._v(t._s(t.article.title))])]),t.bottomTagsVisible?n("div",{staticClass:"tags"},[null!=t.article.tags?n("div",{staticClass:"tags pr-2 h-interval"},t._l(t.article.tags,(function(e){return n("b-badge",{key:e,attrs:{variant:"info"}},[t._v(" "+t._s(e)+" ")])})),1):t._e()]):t._e()]),n("div",{staticClass:"right-side"},[t.bottomTagsVisible||null==t.article.tags?t._e():n("div",{staticClass:"pr-2 d-inline-block h-interval"},t._l(t.article.tags,(function(e){return n("b-badge",{key:e,attrs:{variant:"info"}},[t._v(" "+t._s(e)+" ")])})),1),t.expanded&&t.expandButtonVisible?n("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.expandButtonClick}},[n("i",{staticClass:"fas fa-arrow-circle-down"})]):t._e(),!t.expanded&&t.expandButtonVisible?n("b-button",{staticClass:"p-0",attrs:{variant:"link"},on:{click:t.expandButtonClick}},[n("i",{staticClass:"fas fa-arrow-circle-up"})]):t._e(),n("b-button",{attrs:{variant:"link",to:{name:"ArticleEditPage",params:{id:t.article.id}}}},[n("i",{staticClass:"fas fa-edit"})])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],domProps:{innerHTML:t._s(t.bodyHtml)}})])},x=[],w=n("0e54"),O=n.n(w),j={name:"ArticlePanel",props:{article:{type:Object,required:!0},tagPosition:{default:"right",type:String}},computed:{bodyHtml:function(){return O()(this.article.text)},expandButtonVisible:function(){return null!=this.article.text&&this.article.text.length>0},expanded:function(){return!0===this.article.expanded},bottomTagsVisible:function(){return"bottom"===this.tagPosition}},methods:{expandButtonClick:function(){this.$emit("expand",!this.expanded)}}},k=j,C=Object(c["a"])(k,y,x,!1,null,null,null),_=C.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{attrs:{variant:"link",to:{name:"ArticleCreatePage",params:{categoryId:t.categoryId}}}},[n("i",{staticClass:"fas fa-plus"})])},T=[],I=(n("a9e3"),{name:"ButtonArticleCreatePage",props:{categoryId:Number}}),S=I,P=Object(c["a"])(S,A,T,!1,null,null,null),M=P.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-button",{attrs:{variant:"link",to:{name:"CategorySettingPage",params:{categoryId:t.categoryId}}}},[n("i",{staticClass:"fas fa-cog"})])},$=[],V={name:"ButtonCategorySettingPage",props:{categoryId:Number}},B=V,N=Object(c["a"])(B,E,$,!1,null,null,null),R=N.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.table,(function(e){return n("div",{key:e.text,staticClass:"h-interval"},[n("h3",[t._v(t._s(e.text))]),t._l(e.articles,(function(e){return n("a",{key:e.id,attrs:{href:e.url,target:"_blank"}},[t._v(" "+t._s(e.title)+" ")])}))],2)})),0)},D=[],F={name:"CampactLinksPanel",props:{table:Array}},q=F,H=Object(c["a"])(q,L,D,!1,null,null,null),G=H.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav",{attrs:{pills:"",small:""}},[n("b-nav-item",{attrs:{active:t.modeCompactActive},on:{click:t.modeCompactNavClick}},[t._v(" コンパクト ")]),n("b-nav-item",{attrs:{active:t.modeDetailActive},on:{click:t.modeDetailNavClick}},[t._v(" 詳細 ")])],1)},U=[],z={name:"NavArticleViewMode",props:{mode:String},computed:{modeCompactActive:function(){return"compact"===this.mode},modeDetailActive:function(){return"detail"===this.mode}},methods:{modeCompactNavClick:function(){this.$emit("change","compact")},modeDetailNavClick:function(){this.$emit("change","detail")}}},K=z,Q=Object(c["a"])(K,J,U,!1,null,null,null),W=Q.exports,X=n("2909"),Y=n("d4ec"),Z=n("bee2"),tt=(n("caad"),n("2532"),n("d81d"),n("159b"),n("99af"),function(){function t(){Object(Y["a"])(this,t)}return Object(Z["a"])(t,[{key:"create",value:function(t,e){var n=this.getArticles(t,e),r=this.getTags(n);return this.getTable(n,r)}},{key:"getArticles",value:function(t,e){var n=this;return t.filter((function(t){return null!=t.url})).filter((function(t){return n.isTargetArticle(t,e)}))}},{key:"isTargetArticle",value:function(t,e){return null==e||e.length<=0||null!=t.tags&&e.every((function(e){return t.tags.includes(e)}))}},{key:"getTags",value:function(t){var e=t.some((function(t){return null==t.tags||t.tags.length<=0})),n=e?[{text:"（タグなし）",value:null}]:[],r=t.map((function(t){return t.tags})).reduce((function(t,e){return e.forEach((function(e){!1===t.includes(e)&&t.push(e)})),t}),[]).map((function(t){return{text:t,value:t}}));return[].concat(n,Object(X["a"])(r))}},{key:"getTable",value:function(t,e){return e.map((function(e){var n=t.filter((function(t){return null==e.value?null==t.tags||t.tags.length<=0:null!=t.tags&&t.tags.includes(e.value)}));return Object(b["a"])(Object(b["a"])({},e),{},{articles:n})}))}}]),t}()),et=new tt,nt={name:"ArticleListPageMainPanel",components:{ArticlePanel:_,ButtonArticleCreatePage:M,ButtonCategorySettingPage:R,CampactLinksPanel:G,NavArticleViewMode:W},props:{category:{type:Object,required:!0}},computed:{alertCompactOnlyVisible:function(){return this.modeDetailActive&&this.articles.length<=0&&this.table.length>0},alertDetailOnlyVisible:function(){return this.modeCompactActive&&this.articles.length>0&&this.table.length<=0},alertNoArticle:function(){return this.articles.length<=0&&this.table.length<=0},articles:function(){var t=this.$store.state,e=t.articles,n=t.selectedTagTexts;return e.filter((function(t){return et.isTargetArticle(t,n)}))},mode:function(){return"detail"===this.category.articlesViewMode?"detail":"compact"},modeCompactActive:function(){return"compact"===this.mode},modeDetailActive:function(){return"detail"===this.mode},table:function(){var t=this.$store.state,e=t.articles,n=t.selectedTagTexts;return et.create(e,n)}},methods:{articleExpand:function(t,e){var n=t.id;this.$store.dispatch("setArticleExpanded",{id:n,expanded:e})},navViewModeChange:function(t){var e=this.category.id;this.$store.dispatch("setArticlesViewModeToCategory",{categoryId:e,articlesViewMode:t})}}},rt=nt,at=Object(c["a"])(rt,v,m,!1,null,null,null),it=at.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-nav",{staticClass:"nav-category",attrs:{vertical:""}},t._l(t.categories,(function(e){return n("b-nav-item",{key:e.id,attrs:{active:e.active},on:{click:function(n){return t.categorySelect(e)}}},[t._v(" "+t._s(e.title)+" ")])})),1)},st=[],ot={name:"NavCategories",computed:{categories:function(){var t=this;return this.$store.state.categories.map((function(e){var n=e.id,r=e.title,a=n===t.$store.state.categoryId;return{active:a,id:n,title:r}}))}},methods:{categorySelect:function(t){var e=this;return Object(g["a"])(Object(p["a"])().mark((function n(){return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(null==t){n.next=4;break}return e.$store.commit("setCategoryId",t.id),n.next=4,e.$store.dispatch("loadArticles",t.id);case 4:case"end":return n.stop()}}),n)})))()}}},lt=ot,ut=Object(c["a"])(lt,ct,st,!1,null,null,null),dt=ut.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form-group",t._l(t.tagButtons,(function(e){return n("b-button",{key:e.text,attrs:{variant:e.variant,size:"sm"},on:{click:function(n){return t.tagButtonClick(e)}}},[t._v(" "+t._s(e.text)+" ")])})),1)},pt=[],gt={name:"FormGroupTagButtons",computed:Object(b["a"])({tagButtons:function(){return this.allTags.map((function(t){var e=t.selected,n=t.text,r=e?"info":"outline-info";return{selected:e,text:n,variant:r}}))}},Object(h["b"])(["allTags"])),methods:{tagButtonClick:function(t){var e=t.text,n=t.selected;this.$store.commit("selectTagText",{text:e,selected:!n})}}},bt=gt,ht=Object(c["a"])(bt,ft,pt,!1,null,null,null),vt=ht.exports,mt={name:"ArticlesListPage",components:{ArticleListPageMainPanel:it,FormGroupTagButtons:vt,NavCategories:dt},computed:Object(b["a"])(Object(b["a"])({},Object(h["c"])(["categories","categoryId"])),{},{selectedCategory:function(){var t=this;return this.categories.filter((function(e){return e.id===t.categoryId}))[0]}}),mounted:function(){var t=this;return Object(g["a"])(Object(p["a"])().mark((function e(){return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.dispatch("loadCategories");case 1:case"end":return e.stop()}}),e)})))()}},yt=mt,xt=(n("5467"),Object(c["a"])(yt,d,f,!1,null,null,null)),wt=xt.exports;r["default"].use(u["a"]);var Ot=[{path:"/",name:"ArticlesListPage",component:wt},{path:"/categories/:categoryId/articles/create",name:"ArticleCreatePage",component:function(){return n.e("articles").then(n.bind(null,"fbf5"))}},{path:"/articles/:id/edit",name:"ArticleEditPage",component:function(){return n.e("articles").then(n.bind(null,"1b09"))}},{path:"/categories",name:"CategoryPage",component:function(){return n.e("categories").then(n.bind(null,"622d"))}},{path:"/categories/:id/import",name:"CategoryImportPage",component:function(){return n.e("categories").then(n.bind(null,"4875"))}},{path:"/categories/:categoryId/setting",name:"CategorySettingPage",component:function(){return n.e("categories").then(n.bind(null,"8be7"))}},{path:"/settings",name:"SettingPage",component:function(){return n.e("settings").then(n.bind(null,"e80b"))}}],jt=new u["a"]({routes:Ot}),kt=jt,Ct=(n("ac1f"),n("466d"),function(){function t(){Object(Y["a"])(this,t)}return Object(Z["a"])(t,[{key:"fromArticles",value:function(t){return t.map((function(t){var e=null==t.text?null:t.text.match("^https?://[^ \r\n\t]+"),n=null==e?null:e[0];return Object(b["a"])({expanded:!1,url:n},t)}))}}]),t}()),_t=n("6bfa"),At=n("ff8a"),Tt=n("2bcf"),It=n("26b9"),St=(n("d9e2"),function(){function t(e){Object(Y["a"])(this,t),this.categoryRepository=e}return Object(Z["a"])(t,[{key:"setSettings",value:function(){var t=Object(g["a"])(Object(p["a"])().mark((function t(e,n){var r,a,i,c,s;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.articlesViewMode,a=n.tagPosition,i=n.tagSelectionMode,t.next=3,this.categoryRepository.get(e);case 3:if(c=t.sent,null!=c){t.next=7;break}throw console.error("Specified categoryId not found. categoryId:",e),new Error("Specified categoryId not found. categoryId: "+e);case 7:return s=Object(b["a"])(Object(b["a"])({},c),{},{categoryId:e,articlesViewMode:null!==r&&void 0!==r?r:c.articlesViewMode,tagPosition:null!==a&&void 0!==a?a:c.tagPosition,tagSelectionMode:null!==i&&void 0!==i?i:c.tagSelectionMode}),t.prev=8,t.next=11,this.categoryRepository.put(s);case 11:console.log("保存しました(service):",s),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](8),console.error("カテゴリーを保存できませんでした。",t.t0.stack||t.t0);case 17:case"end":return t.stop()}}),t,this,[[8,14]])})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}()),Pt={namespaced:!0,state:function(){return{article:null,articleId:null}},mutations:{setArticle:function(t,e){var n=null==e||null==e.text?null:O()(e.text);t.article=Object(b["a"])({html:n},e)},setArticleId:function(t,e){t.articleId=e}},actions:{loadSetting:function(t){return Object(g["a"])(Object(p["a"])().mark((function e(){var n,r,a,i,c,s,o,l,u;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.rootGetters,a=r.getDependances(),i=a.articleService,c=a.settingService,e.next=4,c.getSidebarSetting();case 4:if(s=e.sent,o=s.articleId,null!=o){e.next=10;break}return n("setArticleId",null),n("setArticle",null),e.abrupt("return");case 10:return e.next=12,i.get({articleId:o});case 12:l=e.sent,u=l[0],n("setArticleId",o),n("setArticle",u);case 16:case"end":return e.stop()}}),e)})))()},setArticleId:function(t,e){return Object(g["a"])(Object(p["a"])().mark((function n(){var r,a,i,c;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=t.rootGetters,i=a.getDependances(),c=i.settingService,n.next=4,c.setSidebarArticleId(e);case 4:r("setArticleId",e);case 5:case"end":return n.stop()}}),n)})))()}}},Mt=new Ct,Et=new At["a"],$t=new _t["a"](Et),Vt=new It["a"](Et),Bt=new St(Vt),Nt=new Tt["a"]($t,Vt),Rt={articlesDatabase:Et,articleRepository:$t,articleService:Nt,settingService:null};r["default"].use(h["a"]);var Lt=new h["a"].Store({state:{articles:[],categoryId:null,categories:[],selectedTagTexts:[]},getters:{allTags:function(t){var e=t.articles.map((function(t){var e;return null!==(e=t.tags)&&void 0!==e?e:[]})).reduce((function(t,e){return e.filter((function(e){return!1===t.includes(e)})).forEach((function(e){return t.push(e)})),t}),[]);return e.map((function(e){var n=t.selectedTagTexts.includes(e);return{selected:n,text:e,value:e}}))},getDependances:function(){return function(){return Object(b["a"])({},Rt)}}},mutations:{selectTagText:function(t,e){var n,r,a=e.text,i=e.selected,c=t.categories.filter((function(e){return e.id===t.categoryId})),s=null!==(n=null===(r=c[0])||void 0===r?void 0:r.tagSelectionMode)&&void 0!==n?n:"single",o=t.selectedTagTexts.includes(a);"single"!==s?o?!1===i&&(t.selectedTagTexts=t.selectedTagTexts.filter((function(t){return t!==a}))):i&&t.selectedTagTexts.push(a):t.selectedTagTexts=o?[]:[a]},setArticleExpand:function(t,e){var n=e.id,r=e.expanded;t.articles.filter((function(t){return t.id===n})).forEach((function(t){t.expanded=r}))},setArticles:function(t,e){t.articles=e},setCategories:function(t,e){e.autoSelect;var n=e.categories;t.categories=n,n.length>0&&null==t.categoryId&&(t.categoryId=n[0].id)},setCategoryId:function(t,e){t.categoryId=e,t.selectedTagTexts=[]},setCategorySettings:function(t,e){var n=e.categoryId,r=e.articlesViewMode,a=e.tagPosition,i=e.tagSelectionMode;t.categories.filter((function(t){return t.id===n})).forEach((function(t){t.articlesViewMode=null!==r&&void 0!==r?r:t.articlesViewMode,t.tagPosition=null!==a&&void 0!==a?a:t.tagPosition,t.tagSelectionMode=null!==i&&void 0!==i?i:t.tagSelectionMode}))}},actions:{exportArticles:function(t,e){return Object(g["a"])(Object(p["a"])().mark((function t(){var n,r;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.categoryId,t.next=3,Nt.get({categoryId:n});case 3:r=t.sent,$t.export(r);case 5:case"end":return t.stop()}}),t)})))()},loadArticles:function(t,e){return Object(g["a"])(Object(p["a"])().mark((function n(){var r,a;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Nt.get({categoryId:e});case 2:r=n.sent,a=Mt.fromArticles(r),t.commit("setArticles",a),t.commit("setCategoryId",e);case 6:case"end":return n.stop()}}),n)})))()},loadCategories:function(t){return Object(g["a"])(Object(p["a"])().mark((function e(){var n,r,a,i;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.dispatch,a=t.state,e.next=3,Vt.getAll();case 3:if(i=e.sent,n("setCategories",{autoSelect:!0,categories:i}),null==a.categoryId){e.next=8;break}return e.next=8,r("loadArticles",a.categoryId);case 8:case"end":return e.stop()}}),e)})))()},setArticleExpanded:function(t,e){var n=e.id,r=e.expanded;t.commit("setArticleExpand",{id:n,expanded:r}),Nt.setExpanding(n,r)},setArticlesViewModeToCategory:function(t,e){return Object(g["a"])(Object(p["a"])().mark((function n(){var r,a;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.categoryId,a=e.articlesViewMode,console.log("store...",{categoryId:r,articlesViewMode:a}),t.commit("setCategorySettings",{categoryId:r,articlesViewMode:a}),n.next=5,Bt.setSettings(r,{articlesViewMode:a});case 5:case"end":return n.stop()}}),n)})))()},setCategorySettings:function(t,e){return Object(g["a"])(Object(p["a"])().mark((function n(){var r,a,i;return Object(p["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.categoryId,a=e.tagPosition,i=e.tagSelectionMode,t.commit("setCategorySettings",{categoryId:r,tagPosition:a,tagSelectionMode:i}),n.next=4,Bt.setSettings(r,{tagPosition:a,tagSelectionMode:i});case 4:case"end":return n.stop()}}),n)})))()}},modules:{sidebar:Pt}}),Dt=n("5f5b"),Ft=(n("f9e3"),n("2dd8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-alert",{attrs:{variant:"warning",show:""}},[t._v(" データがありません。 ")])}),qt=[],Ht={name:"NotFoundAlert"},Gt=Ht,Jt=Object(c["a"])(Gt,Ft,qt,!1,null,null,null),Ut=Jt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column h-100"},[t._t("header"),n("div",{staticClass:"flex-grow-1 h-0"},[n("div",{staticClass:"h-100"},[t._t("default")],2)]),t._t("footer")],2)},Kt=[],Qt={},Wt=Qt,Xt=(n("6102"),Object(c["a"])(Wt,zt,Kt,!1,null,"bc4d3014",null)),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"h-100 container-main",attrs:{fluid:""}},[n("b-row",{staticClass:"h-100"},[t.noSidebar?t._e():n("b-col",{staticClass:"h-100-sm sidebar pr-0",attrs:{cols:"12",sm:"4",md:"3"}},[n("div",{staticClass:"h-100 pr-3"},[t._t("sidebar")],2)]),n("b-col",{class:t.mainPanelClass,attrs:{cols:"12",sm:t.mainPanelSmCols,md:t.mainPanelMdCols}},[t._t("panel-main")],2)],1)],1)},te=[],ee={props:{noSidebar:Boolean,mainPanelScroll:Boolean},computed:{mainPanelClass:function(){return{"h-100-sm":!0,"panel-main":!0,"overflow-auto":this.mainPanelScroll}},mainPanelSmCols:function(){return this.noSidebar?12:8},mainPanelMdCols:function(){return this.noSidebar?12:9}}},ne=ee,re=(n("0f04"),Object(c["a"])(ne,Zt,te,!1,null,null,null)),ae=re.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column h-100"},[t._m(0),t._t("default"),n("div",{staticClass:"mt-auto"}),null!=t.sidebarArticle?n("div",[n("div",{domProps:{innerHTML:t._s(t.sidebarArticle.html)}})]):t._e(),"ArticlesListPage"!=t.$route.name?n("b-form-group",[n("b-button",{attrs:{variant:"link",to:{name:"ArticlesListPage"}}},[n("i",{staticClass:"far fa-newspaper"}),n("span",{staticClass:"ml-2"},[t._v("記事")])])],1):t._e(),"CategoryPage"!=t.$route.name?n("b-form-group",[n("b-button",{attrs:{variant:"link",to:{name:"CategoryPage"}}},[n("i",{staticClass:"far fa-folder-open"}),n("span",{staticClass:"ml-2"},[t._v("カテゴリー")])])],1):t._e(),"SettingPage"!=t.$route.name?n("b-form-group",[n("b-button",{attrs:{variant:"link",to:{name:"SettingPage"}}},[n("i",{staticClass:"fas fa-cog"}),n("span",{staticClass:"ml-2"},[t._v("設定")])])],1):t._e()],2)},ce=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h1",{staticClass:"h2"},[n("span",[t._v("🏠")]),n("span",{staticClass:"site-title-animals"},[t._v("🐕🦘🐬🐓🕊🦢")])])}],se={name:"TheSidebar",computed:{sidebarArticle:function(){return this.$store.state.sidebar.article}},mounted:function(){var t=this;return Object(g["a"])(Object(p["a"])().mark((function e(){return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.$store.state.sidebar.articleId){e.next=3;break}return e.next=3,t.$store.dispatch("sidebar/loadSetting");case 3:case"end":return e.stop()}}),e)})))()}},oe=se,le=(n("9b33"),Object(c["a"])(oe,ie,ce,!1,null,"2bd5a978",null)),ue=le.exports,de=function(){function t(e){Object(Y["a"])(this,t),this.database=e.instance}return Object(Z["a"])(t,[{key:"get",value:function(){var t=Object(g["a"])(Object(p["a"])().mark((function t(e){return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.database.settings.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"put",value:function(){var t=Object(g["a"])(Object(p["a"])().mark((function t(e){var n;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.database.settings.put(e);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t["catch"](0),console.error(null!==(n=t.t0.stack)&&void 0!==n?n:t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),fe=function(){function t(e){Object(Y["a"])(this,t),this.settingRepository=e}return Object(Z["a"])(t,[{key:"getSidebarSetting",value:function(){var t=Object(g["a"])(Object(p["a"])().mark((function t(){var e,n,r;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.settingRepository.get("sidebar");case 2:if(t.t1=e=t.sent,t.t0=null!==t.t1,!t.t0){t.next=6;break}t.t0=void 0!==e;case 6:if(!t.t0){t.next=10;break}t.t2=e,t.next=11;break;case 10:t.t2={};case 11:return n=t.t2,r=n.articleId,t.abrupt("return",{name:"sidebar",articleId:r});case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setSidebarArticleId",value:function(){var t=Object(g["a"])(Object(p["a"])().mark((function t(e){var n;return Object(p["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getSidebarSetting();case 2:return n=t.sent,n.articleId=e,console.log("service sidebar:",n),t.next=7,this.settingRepository.put(n);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();r["default"].component("NotFoundAlert",Ut),r["default"].component("FullHeight",Yt),r["default"].component("TheMainLayout",ae),r["default"].component("TheSidebar",ue),r["default"].config.productionTip=!1,r["default"].use(Dt["a"]);var pe=new de(Rt.articlesDatabase),ge=new fe(pe);Rt.settingService=ge,new r["default"]({router:kt,store:Lt,render:function(t){return t(l)}}).$mount("#app")},"582c":function(t,e,n){},6102:function(t,e,n){"use strict";n("54b6")},"6bfa":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("c7eb"),a=n("1da1"),i=n("d4ec"),c=n("bee2"),s=(n("d81d"),n("e9c4"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("4de4"),n("caad"),n("2532"),n("5a0c")),o=n.n(s),l=n("0ecf"),u=n.n(l);o.a.extend(u.a);var d=function(){function t(e){Object(i["a"])(this,t),this.database=e.instance}return Object(c["a"])(t,[{key:"addTagsToArticle",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e,n){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.map((function(t){return{articleId:e,tagText:t}})),t.next=3,this.database.articleTags.bulkPut(a);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"deleteTagsFromArticle",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.database.articleTags.bulkDelete(e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"export",value:function(t){var e=JSON.stringify({articles:t},null,2),n=new Blob([e],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.target="_blank",r.download="Articles.json",document.body.appendChild(r),r.click(),document.body.removeChild(r)}},{key:"getArticles",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){var n,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.categoryId,a=e.articleId,t.next=3,this.database.articles.filter((function(t){return(null==n||t.categoryId===n)&&(null==a||t.id===a)})).toArray();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getArticleTags",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.database.articleTags.filter((function(t){return e.includes(t.articleId)})).toArray();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getTagTexts",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.database.articleTags.filter((function(t){return t.articleId===e})).toArray();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setArticle",value:function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e){var n,a,i,c,s,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.id,a=e.categoryId,i=e.expanded,c=e.title,s=e.text,l=o.a.utc().format(),t.next=4,this.database.articles.put({id:n,categoryId:a,expanded:i,title:c,text:s,updatedOn:l});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()},"85ec":function(t,e,n){},"9b33":function(t,e,n){"use strict";n("038f")},d9f6:function(t,e,n){},ff8a:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("d4ec"),a=n("bee2"),i=n("4dec"),c=function(){function t(){Object(r["a"])(this,t),this.instance=new i["a"]("articlesDatabase"),this.instance.version(2).stores({articles:"++id, categoryId, title, text, createdOn, updatedOn",articleTags:"++id, articleId, tagText",categories:"++id, title",settings:"name"}),this.instance.version(1).stores({articles:"++id, categoryId, title, text, createdOn, updatedOn",articleTags:"++id, articleId, tagText",categories:"++id, title"})}return Object(a["a"])(t,[{key:"delete",value:function(){i["a"].delete("articlesDatabase")}}]),t}()}});
//# sourceMappingURL=app.efd44fe7.js.map