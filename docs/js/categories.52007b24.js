(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["categories"],{4875:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TheMainLayout",{attrs:{"main-panel-scroll":""}},[a("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"}),a("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[null==t.category?a("NotFoundAlert"):a("div",{staticClass:"h-100"},[a("h2",[t._v("記事を"+t._s(t.category.title)+"にインポート")]),a("b-form-group",[a("b-form-file",{attrs:{value:t.file,accept:"application/json",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{input:t.fileSelect},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),a("div",{staticClass:"d-flex"},[a("b-form-group",{staticClass:"ml-auto"},[a("b-button",{directives:[{name:"show",rawName:"v-show",value:t.importButton.visible,expression:"importButton.visible"}],attrs:{disabled:t.importButton.disabled,variant:"primary"},on:{click:t.importButtonClick}},[t._v(" 選択をインポート ")])],1)],1),a("b-list-group",t._l(t.articles,(function(e){return a("b-list-group-item",{key:e.id,staticClass:"d-flex"},[a("div",[t._v(t._s(e.title))]),e.completed?a("b-badge",{staticClass:"ml-auto",attrs:{variant:"info"}},[t._v(" 済 ")]):t._e()],1)})),1)],1)],1)],1)},n=[],o=a("c7eb"),c=a("5530"),i=a("1da1"),s=(a("4de4"),a("d3b7"),a("d81d"),a("159b"),a("d4ec")),l=a("bee2"),u=function(){function t(){Object(s["a"])(this,t)}return Object(l["a"])(t,[{key:"parse",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(e){var a,r,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.readFileAsText(e);case 3:return a=t.sent,r=JSON.parse(a).articles,t.abrupt("return",{succeeded:!0,articles:r});case 8:return t.prev=8,t.t0=t["catch"](0),n="ファイルの読み込みに失敗しました。",console.log(n,t.t0),t.abrupt("return",{succeeded:!1,exception:t.t0,message:n});case 13:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"readFileAsText",value:function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){var a=new FileReader;a.onload=function(){return t(a.result)},a.readAsText(e)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),d=a("6bfa"),p=a("2bcf"),g=a("ff8a"),f=a("26b9"),b=new g["a"],h=new f["a"](b),m=new u,v=new d["a"](b),y=new p["a"](v,h),w={name:"CategoryImportPage",data:function(){return{articles:[],category:null,categoryId:null,file:null}},computed:{importButton:function(){var t=null==this.articles?0:this.articles.length,e=null==this.articles?0:this.articles.filter((function(t){return!t.completed})).length,a=e<=0||null==this.file,r=t>0&&null!=this.file;return{disabled:a,visible:r}}},watch:{$route:function(t){this.categoryId=parseInt(t.params.id),this.loadCategory()}},mounted:function(){this.categoryId=parseInt(this.$route.params.id),this.loadCategory()},methods:{fileSelect:function(t){var e=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var r,n,i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.file=t,a.next=3,m.parse(t);case 3:r=a.sent,n=r.succeeded,i=r.articles,n&&(e.articles=i.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{completed:!1})})));case 7:case"end":return a.stop()}}),a)})))()},importButtonClick:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.articles.filter((function(t){return!t.computed})).forEach(function(){var e=Object(i["a"])(Object(o["a"])().mark((function e(a){var r,n,c,i;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.title,n=a.text,c=a.tags,i=t.categoryId,e.next=4,y.set({categoryId:i,title:r,text:n,tags:c});case 4:a.completed=!0;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})))()},loadCategory:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h.get(t.categoryId);case 2:t.category=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},C=w,x=a("2877"),j=Object(x["a"])(C,r,n,!1,null,null,null);e["default"]=j.exports},"622d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TheMainLayout",{attrs:{"main-panel-scroll":""}},[a("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"}),a("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[a("h2",[t._v("カテゴリー")]),a("section",{staticClass:"section-new-card"},[a("h3",[t._v("新規作成")]),a("b-card",{staticClass:"card-new-category"},[a("b-form-group",{attrs:{label:"名称"}},[a("b-input",{model:{value:t.cardNewCategoryName,callback:function(e){t.cardNewCategoryName=e},expression:"cardNewCategoryName"}})],1),a("b-form-group",{staticClass:"mb-0",attrs:{"label-sr-only":""}},[a("b-button",{attrs:{disabled:t.cardNewCategoryCreateButtonDisabled,variant:"primary"},on:{click:t.createCategoryButtonClick}},[t._v(" 作成 ")])],1)],1)],1),a("section",{staticClass:"section-list"},[a("h3",[t._v("一覧")]),t._l(t.$store.state.categories,(function(e){return a("b-card",{key:e.id,attrs:{"body-class":"d-flex"}},[a("div",[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"ml-auto h-interval"},[a("router-link",{attrs:{to:{name:"CategoryImportPage",params:{id:e.id}}}},[t._v(" インポート ")]),a("b-button",{attrs:{variant:"info"},on:{click:function(a){return t.exportButtonClick(e)}}},[a("i",{staticClass:"fas fa-download"}),t._v(" エクスポート ")])],1)])}))],2)])],1)},n=[],o=a("c7eb"),c=a("1da1"),i=(a("b0c0"),a("ff8a")),s=a("26b9"),l=new i["a"],u=new s["a"](l),d={name:"CategoryPage",computed:{cardNewCategoryCreateButtonDisabled:function(){var t=this.cardNewCategory,e=t.created,a=t.name;return e||null==a||a.length<=0},cardNewCategoryName:{get:function(){return this.cardNewCategory.name},set:function(t){this.cardNewCategory.name=t,this.cardNewCategory.created=!1}}},data:function(){return{cardNewCategory:{created:!1,name:""}}},mounted:function(){this.$store.dispatch("loadCategories")},methods:{createCategoryButtonClick:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){var a,r,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.cardNewCategory.created=!0,a=t.cardNewCategory.name,r="single",e.next=5,u.put({title:a,tagSelectionMode:r});case 5:n=e.sent,console.log("Category created. categoryId:",n),t.$store.dispatch("loadCategories");case 8:case"end":return e.stop()}}),e)})))()},exportButtonClick:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.id,e.$store.dispatch("exportArticles",{categoryId:r});case 2:case"end":return a.stop()}}),a)})))()}}},p=d,g=a("2877"),f=Object(g["a"])(p,r,n,!1,null,null,null);e["default"]=f.exports},"8be7":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("TheMainLayout",{attrs:{"main-panel-scroll":""}},[a("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"}),a("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[null==t.category?a("NotFoundAlert"):a("div",{staticClass:"h-100"},[a("h2",[t._v(t._s(t.category.title)+"の設定")]),a("b-form",[a("b-form-group",{attrs:{label:"タグの選択","label-cols":"4"}},[a("b-radio-group",{attrs:{name:"tagsSelection",options:t.tagSelection.options},model:{value:t.tagSelectionSelected,callback:function(e){t.tagSelectionSelected=e},expression:"tagSelectionSelected"}})],1),a("b-form-group",{attrs:{label:"タグの表示位置","label-cols":"4"}},[a("b-radio-group",{attrs:{name:"tagsPosition",options:t.tagsPosition.options},model:{value:t.tagPositionSelected,callback:function(e){t.tagPositionSelected=e},expression:"tagPositionSelected"}})],1)],1)],1)],1)],1)},n=[],o=a("c7eb"),c=a("1da1"),i=a("ff8a"),s=a("26b9"),l=new i["a"],u=new s["a"](l),d={name:"CategorySettingPage",data:function(){return{category:null,categoryId:null,tagsPosition:{options:[{text:"タイトルの右",value:"right"},{text:"タイトルの下",value:"bottom"}]},tagSelection:{options:[{text:"最大1個",value:"single"},{text:"複数",value:"multiple"}]}}},computed:{tagPositionSelected:{get:function(){var t,e;return null!==(t=null===(e=this.category)||void 0===e?void 0:e.tagPosition)&&void 0!==t?t:"right"},set:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.categoryId,a.next=3,e.$store.dispatch("setCategorySettings",{categoryId:r,tagPosition:t});case 3:return a.next=5,e.loadCategory();case 5:case"end":return a.stop()}}),a)})))()}},tagSelectionSelected:{get:function(){var t,e;return null!==(t=null===(e=this.category)||void 0===e?void 0:e.tagSelectionMode)&&void 0!==t?t:"single"},set:function(t){var e=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.categoryId,a.next=3,e.$store.dispatch("setCategorySettings",{categoryId:r,tagSelectionMode:t});case 3:return a.next=5,e.loadCategory();case 5:case"end":return a.stop()}}),a)})))()}}},watch:{$route:function(t){this.categoryId=parseInt(t.params.categoryId),this.loadCategory()}},mounted:function(){this.categoryId=parseInt(this.$route.params.categoryId),this.loadCategory()},methods:{loadCategory:function(){var t=this;return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u.get(t.categoryId);case 2:t.category=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},p=d,g=a("2877"),f=Object(g["a"])(p,r,n,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=categories.52007b24.js.map