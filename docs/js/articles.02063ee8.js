"use strict";(self["webpackChunkportal"]=self["webpackChunkportal"]||[]).push([[525],{3015:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=function(){var t=this,e=t._self._c;return e("TheMainLayout",{attrs:{"no-sidebar":""}},[e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[e("FullHeight",[e("b-form-group",{attrs:{slot:"header","label-sr-only":""},slot:"header"},[e("b-input",{attrs:{name:"title",placeholder:"タイトル"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("b-row",{staticClass:"h-100 pb-3"},[e("b-col",{staticClass:"h-100",attrs:{cols:"6"}},[e("b-textarea",{staticClass:"h-100",attrs:{name:"text",placeholder:"本文","no-resize":""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),e("b-col",{staticClass:"overflow-auto h-100",attrs:{cols:"6"}},[e("div",{domProps:{innerHTML:t._s(t.form.preview)}})])],1),e("b-form-group",{attrs:{slot:"footer","label-sr-only":""},slot:"footer"},[e("div",{staticClass:"d-flex h-interval"},[e("b-input",{attrs:{name:"tags",placeholder:"タグ1 タグ2 ..."},model:{value:t.form.tagsString,callback:function(e){t.$set(t.form,"tagsString",e)},expression:"form.tagsString"}}),e("b-button",{staticClass:"button-save",attrs:{variant:"primary"},on:{click:t.saveButtonClick}},[t._v(" 保存 ")]),e("b-button",{staticClass:"button-cancel",attrs:{variant:"secondary",to:{name:"ArticlesListPage"}}},[t._v(" キャンセル ")])],1)])],1)],1)])},i=[],r=(a(7658),a(7823)),o=a(2925),l=a(5183),n=a(2593),c=a(9935);const d=new l.Z,u=new o.Z(d),h=new c.Z(d),m=new n.Z(u,h);var f={name:"ArticleCreatePage",data(){return{categoryFound:null,categoryId:parseInt(this.$route.params.categoryId),form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":r.T.parse(this.form.text)}}},watch:{$route(t){this.categoryId=parseInt(t.params.categoryId),this.categoryFound=null,this.confirmCategoryExistence()}},mounted(){this.confirmCategoryExistence()},methods:{async confirmCategoryExistence(){const t=await h.get(this.categoryId);this.categoryFound=null!=t,!1===this.categoryFound&&this.showCatgoryNotFoundToast()},async saveButtonClick(){const{categoryId:t}=this,{title:e,text:a,tagsString:s}=this.form;if(null==this.categoryFound&&await this.confirmCategoryExistence(),!0!==this.categoryFound)return void this.showCatgoryNotFoundToast();const i=Array.from(new Set(s.split(" ").filter((t=>t.length>0))).values());await m.set({categoryId:t,title:e,text:a,tags:i}),this.$router.push({name:"ArticlesListPage"})},showCatgoryNotFoundToast(){this.$bvToast.toast("カテゴリが見つかりません。",{autoHideDelay:5e3,appendToast:!0})}}},g=f,p=a(1001),v=(0,p.Z)(g,s,i,!1,null,"085f616f",null),b=v.exports},2283:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=function(){var t=this,e=t._self._c;return e("TheMainLayout",{attrs:{"no-sidebar":""}},[e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[t.loading?e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):null==t.article?e("NotFoundAlert"):e("FullHeight",[e("b-form-group",{attrs:{slot:"header","label-sr-only":""},slot:"header"},[e("b-input",{attrs:{name:"title",placeholder:"タイトル"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),e("b-row",{staticClass:"h-100 pb-3"},[e("b-col",{staticClass:"h-100",attrs:{cols:"6"}},[e("b-textarea",{staticClass:"h-100",attrs:{name:"text",placeholder:"本文","no-resize":""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),e("b-col",{staticClass:"overflow-auto h-100",attrs:{cols:"6"}},[e("div",{staticClass:"article-body-view",domProps:{innerHTML:t._s(t.form.preview)}})])],1),e("b-form-group",{attrs:{slot:"footer","label-sr-only":""},slot:"footer"},[e("div",{staticClass:"d-flex h-interval"},[e("b-input",{attrs:{name:"tags",placeholder:"タグ1 タグ2 ..."},model:{value:t.form.tagsString,callback:function(e){t.$set(t.form,"tagsString",e)},expression:"form.tagsString"}}),e("b-button",{staticClass:"button-save",attrs:{variant:"primary"},on:{click:t.saveButtonClick}},[t._v(" 保存 ")]),e("b-button",{staticClass:"button-cancel",attrs:{variant:"secondary",to:{name:"ArticlesListPage"}}},[t._v(" キャンセル ")])],1)])],1)],1)])},i=[],r=(a(7658),a(7823)),o=a(2925),l=a(5183),n=a(2593),c=a(9935);const d=new l.Z,u=new o.Z(d),h=new c.Z(d),m=new n.Z(u,h);var f={name:"ArticleEditPage",data(){const t=parseInt(this.$route.params.id);return{article:null,articleId:t,loading:!0,form:{title:"",text:"",preview:"",tagsString:""}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":r.T.parse(this.form.text)}}},watch:{$route(t){this.articleId=parseInt(t.params.id),this.loadArticle()}},mounted(){this.articleId=parseInt(this.$route.params.id),this.loadArticle()},methods:{async loadArticle(){this.loading=!0,this.article=null;const{articleId:t}=this,e=await m.get({articleId:t});e.length>0&&(this.article=e[0],this.form.title=this.article.title,this.text=this.article.text,this.form.tagsString=this.article.tags?.join(" ")??""),this.loading=!1},async saveButtonClick(){const{id:t,categoryId:e}=this.article,{title:a,text:s,tagsString:i}=this.form,r=Array.from(new Set(i.split(" ").filter((t=>t.length>0))).values());await m.set({id:t,categoryId:e,title:a,text:s,tags:r}),this.$router.push({name:"ArticleReadPage",parems:{id:t}})}}},g=f,p=a(1001),v=(0,p.Z)(g,s,i,!1,null,"2c0a89cf",null),b=v.exports},9060:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=function(){var t=this,e=t._self._c;return e("TheMainLayout",[e("TheSidebar",{attrs:{slot:"sidebar"},slot:"sidebar"}),e("div",{staticClass:"h-100",attrs:{slot:"panel-main"},slot:"panel-main"},[t.loading?e("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):null==t.article?e("NotFoundAlert"):e("section",{staticClass:"h-100 main"},[e("div",{staticClass:"title-div"},[e("h2",[t._v(t._s(t.form.title))]),e("div",[e("b-button",{attrs:{variant:"link",to:{name:"ArticleEditPage",params:{id:t.article.id}}}},[e("i",{staticClass:"fas fa-edit"})]),e("b-button",{staticClass:"button-cancel",attrs:{variant:"link",to:{name:"ArticlesListPage"}}},[e("i",{staticClass:"fas fa-times"})])],1)]),e("div",{staticClass:"preview article-body-view",domProps:{innerHTML:t._s(t.form.preview)}}),e("div",{staticClass:"h-interval"},t._l(t.form.tags,(function(a){return e("b-badge",{key:a,attrs:{variant:"info"}},[t._v(" "+t._s(a)+" ")])})),1)])],1)],1)},i=[],r=a(7823),o=a(2925),l=a(5183),n=a(2593),c=a(9935);const d=new l.Z,u=new o.Z(d),h=new c.Z(d),m=new n.Z(u,h);var f={name:"ArticleReadPage",data(){const t=parseInt(this.$route.params.id);return{article:null,articleId:t,loading:!0,form:{title:"",text:"",preview:"",tags:[]}}},computed:{text:{get(){return this.form.text},set(t){this.form.text=t,this.form.preview=null==this.form.text?"":r.T.parse(this.form.text)}}},watch:{$route(t){this.articleId=parseInt(t.params.id),this.loadArticle()}},mounted(){this.articleId=parseInt(this.$route.params.id),this.loadArticle()},methods:{async loadArticle(){this.loading=!0,this.article=null;const{articleId:t}=this,e=await m.get({articleId:t});e.length>0&&(this.article=e[0],this.form.title=this.article.title,this.text=this.article.text,this.form.tags=this.article.tags),this.loading=!1}}},g=f,p=a(1001),v=(0,p.Z)(g,s,i,!1,null,"557caa40",null),b=v.exports}}]);
//# sourceMappingURL=articles.02063ee8.js.map